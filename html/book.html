<html><head></head><body><p></p><p></p><div class="default"><div class="content"><h1 id="introduction-8d21">Introduction</h1></div></div><blockquote><p>A beginning is the time for taking the most delicate care that the balances are correct.</p><cite><p>Frank Herbert, <em>Dune</em> (1965)</p></cite></blockquote><p>Mau is a lightweight markup language heavily inspired by Markdown and AsciiDoc that makes it a breeze to write blog posts or books. If you already know Markdown or AsciiDoc you already know which type of software Mau is, and you will quickly learn its syntax.</p><p>The main goal of Mau, however, is to provide a <em>customisable</em> markup language. While Mau&#x27;s syntax is fixed by its implementation, its output is created through user-provided templates. This strategy gives the user great flexibility with no added complexity.</p><p>I currently use Mau to write posts for my blog <a href="https://www.thedigitalcatonline.com">The Digital Cat</a> and to write books like <a href="https://leanpub.com/clean-architectures-in-python">Clean Architectures in Python</a>. This documentation is also written using Mau. So, as you can see, the system is production-ready, and you can start using it today.</p><h2 id="the-story-so-far-0b3e">The story so far</h2><p>Markdown is a great format, and I used it for all the posts in my blog since I started writing. Pelican, which is the static site generator that I use, supports Markdown out of the box, so it was extremely easy to start using it, and overall I had an enjoyable experience.</p><p>When the idea of a book about the clean architecture began to take shape in my mind, a quick survey of the platforms for self-publishing led me to LeanPub, which provides a good toolchain based on their Markdown dialect called <a href="http://markua.com/">Markua</a>. Being so similar to Markdown, the transition was seamless for me, and I could publish the first edition of the book without any issues.</p><p>In the meanwhile, my activity on the blog increased, and I started to feel the need to add features to my articles that weren&#x27;t easily created with Markdown, such as adding a file name and callouts to the code blocks or adding admonitions. Sure, such things can be added using raw HTML, but that popped the bubble of the simple markup syntax, so I wasn&#x27;t happy with that solution.</p><p>The same problems arose when I started working on the second version of the book, with some additional concerns. Since the book is freely available, I wanted to use the same source code to generate a website and be able to reuse the same features both in the resulting HTML and in the PDF.</p><p>I couldn&#x27;t find a good way to create tips and warnings using Markdown. Recently, Python Markdown added a feature that allows specifying the file name for the source code, but the resulting HTML cannot easily be changed, making it difficult to achieve the graphical output I wanted through CSS. So, I started looking into other projects.</p><p>I tried <a href="https://pandoc.org/">Pandoc</a>, and a week spent trying to learn again that black magic called TeX was enough for me to decide that the system wasn&#x27;t what I needed. My relationship with TeX/LaTeX has always been stormy: while I admire the system, the ingenuity, and <a href="https://yakshav.es/the-patron-saint-of-yakshaves/ ">the one-man show effort</a> behind TeX, the final result is a convoluted beast that is difficult to tame. It is also terribly undocumented!</p><p>The third system that I found was <a href="https://asciidoc-py.github.io/">AsciiDoc</a>, which started as a Python project, abandoned for a while and eventually resurrected by Dan Allen with <a href="https://asciidoctor.org/">Asciidoctor</a>. AsciiDoc has a lot of features and I consider it superior to Markdown, but Asciidoctor is a Ruby program, and this made it difficult for me to use it. In addition, the standard output of Asciidoctor is a nice single HTML page but again customising it is a pain. I eventually created the site of the book using it, but adding my Google Analytics code and a <code>sitemap.xml</code> to the HTML wasn&#x27;t trivial, not to mention customising the look of elements such as admonitions.</p><p>In the end, I wasn&#x27;t completely happy with Asciidoctor, and once again I started looking around to see if there was something that matched my requirements.</p><h3 id="what-i-was-looking-for-3013">What I was looking for</h3><p>In a nutshell, this is what I was hoping to find:</p><ul><li>A simple markup syntax [Markdown, Markua, Asciidoctor]</li><li>A stand-alone implementation that I can run locally [Markdown, Asciidoctor]</li><li>A Python implementation that can be used from Pelican [Markdown]</li><li>Support for admonitions and callouts [Asciidoctor]</li><li>PDF output [Asciidoctor]</li><li>Highly configurable HTML output []</li></ul><p>As you can see none of the systems could tick all the boxes, and all of them are missing a way to easily change the output of the rendering.</p><h3 id="what-i-did-ae9b">What I did</h3><p>Since no existing tool was matching my requirements I did what people like me do when they lack a tool. I wrote it myself!</p><p>I have been studying compilers all my life, even though I can by no means be called an expert. I have a <a href="https://www.thedigitalcatonline.com/blog/2017/05/09/a-game-of-tokens-write-an-interpreter-in-python-with-tdd-part-1/">series of posts</a> on my blog where I write an interpreter in Python, based on the <a href="https://ruslanspivak.com/lsbasi-part1/">amazing work of Ruslan Spivak</a>, so I thought that I might have at least tried to create a Python interpreter for Asciidoctor&#x27;s syntax since the original AsciiDoc code was left unmaintained (apparently development started again later).</p><p>After one month I had a working tool that I successfully connected with Pelican and used to render some posts that I had already written in Markdown. I don&#x27;t consider the project revolutionary, but I can honestly say that the day I saw Mau working for the first time is one of the best days of my career as a software developer. At that point, Mau had already slightly diverged from the original idea, though.</p><p>While initially I was aiming to an implementation of AsciiDoctor&#x27;s syntax, and retained a great deal of it, I took the opportunity to try a different path when it came to rendering. Having already successfully used Jinja2 in other contexts, I had this idea of using Jinja templates to render Mau&#x27;s output, so that the user could either use the standard one or provide their own and thus easily customise the final result.</p><p>I later wrote a visitor (a rendering class) that converts Mau&#x27;s input into AsciiDoctor or Markua, and even though it doesn&#x27;t cover all the features of the two languages, it allowed me to use Mau to rewrite my book and publish it online while using the Markua output to feed Leanpub&#x27;s processing chain that produces the PDF.</p><h2 id="where-we-are-now-797a">Where we are now</h2><p>The short story is that Mau works, and as I already mentioned is used for both my blog and my books. Mau&#x27;s features are</p><ul><li>A simple markup syntax</li><li>A stand-alone implementation that you can run locally on any system that supports Python3</li><li>A plugin for Pelican that allows you to use Mau to write blog posts and website pages</li><li>Full support for a good range of standard HTML features (paragraphs, lists, headers, ...) and for some advanced ones such as admonitions, code callouts, includes, and footnotes.</li><li>Extremely configurable output using Jinja2 templates</li><li>Stand-alone PDF creation (since version 3)</li></ul><p>I learned a lot writing Mau, and I&#x27;m happy that the whole idea proved worth the time I invested. I&#x27;d love to know that other people found it useful, so in this manual I will show you how to install and use Mau for your projects.</p><p>Thanks for giving Mau a try!</p><h2 id="how-to-contribute-90e4">How to contribute</h2><p>Feel free to send PRs to fix this book should you find typos or any other mistake. Contributions are more than welcome!</p><p>The whole book is released under Creative Commons Attribution 4.0 International (CC BY 4.0).</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="install-and-run-mau-b5ff">Install and run Mau</h1></div></div><blockquote><p>“I’ll tell you. I’m going to install a visiplate right over my desk. Right on the wall over there, see!”</p><cite><p>Isaac Asimov, &quot;I, Robot&quot; (1950)</p></cite></blockquote><p>In this chapter I will show you how to install Mau both as a stand-alone tool and as a plugin for Pelican. The only requirements are a working Python3 installation and a virtual environment.</p><p>While Python comes preinstalled in several operating systems these days, you can find detailed instructions on how to install it on the Python official website. Virtual environments are covered in the official documentation, but you might want to also explore tools to manage them, like pyenv etc. These are however not mandatory to run Mau.</p><h2 id="install-mau-as-a-stand-alone-tool-c605">Install Mau as a stand-alone tool</h2><p>Mau is available <a href="https://pypi.org/project/mau/">on PyPI</a> and to install it you just need to run</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>pip install mau
</div></div><p>At this point you should have the command line tool <code>mau</code> available. You can test it with</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau --version
</div></div><p>You can get help directly on the command line running</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau --help
</div></div><p>You will notice in the help text that the option <code>-f</code> is used to specify the output format, and that the only available output is <code>dump</code>, which prints out the Abstract Syntax Tree. To render Mau source code you need a visitor plugin, and at the moment the available ones are the <a href="https://pypi.org/project/mau_html_visitor/">HTML visitor</a> and the <a href="https://pypi.org/project/mau_tex_visitor/">TeXvisitor</a>. You can install only one of them or both.</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>pip install mau-html-visitor
pip install mau-tex-visitor
</div></div><p>Now, if you run <code>mau --help</code> you will see the new output format available to the option <code>-f</code>.</p><h2 id="run-mau-as-a-stand-alone-tool-8112">Run Mau as a stand-alone tool</h2><p>The simplest command line for Mau is</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau -f FORMAT -i INPUT
</div></div><p>that reads the Mau source file <code>INPUT</code> and converts it into the desired format saving the output in a file called <code>INPUT.${ext}</code>, where <code>${ext}</code> is a suitable extension that depends on the chosen format. If the input file has the extension <code>.mau</code> that will be automatically removed.</p><p>If you want to specify the output format and the name of the output file you can use the two options <code>-f</code> and <code>-o</code></p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau -f FORMAT -i INPUT -o OUTPUT
</div></div><p>where <code>FORMAT</code> is one of the output formats that Mau supports, and both <code>INPUT</code> and <code>OUTPUT</code> are full paths, extensions included.</p><h3 id="example-3b8e">Example</h3><p>Make sure you installed the HTML visitor and create the file <code>test.mau</code> in the current directory with this content</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>= A test

This is a test for the Mau markup processor.
</div></div><p>Now you can run</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau -f html -i test.mau -o test.html
</div></div><p>That will parse the content of <code>test.mau</code> and render it as HTML into <code>test.html</code>. The content of that file is</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>html<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>head<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/head<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>body<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>h1 id=<span class="ni">&amp;quot;</span>a-test<span class="ni">&amp;quot;&amp;gt;</span>A test<span class="ni">&amp;lt;</span>/h1<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is a test for the Mau markup processor.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/body<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/html<span class="ni">&amp;gt;</span>
</div></div><p>(minus the formatting which was added here for clarity)</p><p>You can now open the output file with your browser</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>firefox test.html
</div></div><p>and enjoy your first document created with Mau.</p><h3 id="configuration-file-7c2e">Configuration file</h3><p>Mau supports a configuration file written in YAML that can be loaded with the option <code>-c</code></p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau -c config.yml -f html -i test.mau -o test.html
</div></div><p>Each value defined in the config file is stored as a variable under the namespace <code>mau</code>, and can be used in the Mau source. See the section about variables to know more about this.</p><h2 id="using-mau-programmatically-7edc">Using Mau programmatically</h2><p>You can use Mau programmatically in your Python code. You fist need to import <code>Mau</code> and the function to load the visitor plugins</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mau</span> <span class="kn">import</span> <span class="n">Mau</span><span class="p">,</span> <span class="n">load_visitors</span>
</div></div><p>The object <code>Mau</code> has the following constructor</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Mau</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">input_file_name</span><span class="p">,</span>
        <span class="n">visitor_class</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">custom_templates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">templates_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">full_document</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
</div></div><ul><li><code>input_file_name</code> is used by Mau when a syntax error is found. Mau tries to point out where the syntax error is and it includes the name of the file.</li><li><code>visitor_class</code> is the Python class that implements the conversion into the target format.</li><li><code>config</code> is a dictionary containing the configuration.</li><li><code>custom_templates</code> is a dictionary containing custom templates.</li><li><code>templates_directory</code> is a directory that contains a file for each template you want to customise.</li><li><code>full_document</code> tells Mau if the output is a fragment or if it has to be wrapped in a document using the specific template (which might add header and footer, for example).</li></ul><p>To initialise it you need to load the visitor plugins and to select the one corresponding to the output format you want.</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">visitor_classes</span> <span class="o">=</span> <span class="n">load_visitors</span><span class="p">()</span>
<span class="n">visitor_class</span> <span class="o">=</span> <span class="n">visitors</span><span class="p">[</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">html</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;]</span>
</div></div><p>Then you might customise the configuration and the templates</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">some_var</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="mi">42</span>
<span class="p">}</span>

<span class="n">custom_templates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">header</span><span class="o">.</span><span class="n">html</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="o">&amp;</span><span class="c1">#x27;&amp;lt;h{{ level }} id=&amp;quot;{{ anchor }}&amp;quot;&amp;gt;{{ value }}&amp;lt;/h{{ level }}&amp;gt;&amp;#x27;,</span>
<span class="p">}</span>
<span class="n">templates_directory</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="nb">dir</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>
</div></div><p>As you can see from the prototype, all these values are optional. At this point you can initialise the object <code>Mau</code></p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">mau</span> <span class="o">=</span> <span class="n">Mau</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">path</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;,</span>
    <span class="n">visitor_class</span><span class="o">=</span><span class="n">visitor_class</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
    <span class="n">custom_templates</span><span class="o">=</span><span class="n">custom_templates</span><span class="p">,</span>
    <span class="n">templates_directory</span><span class="o">=</span><span class="n">templates_directory</span><span class="p">,</span>
<span class="p">)</span>
</div></div><p>You can then call the lexer, the parser, and the visitor on some Mau text contained in a string</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Some</span> <span class="n">Mau</span> <span class="n">text</span> <span class="n">contained</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">string</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>
<span class="n">lexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">run_lexer</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">run_parser</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">tokens</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">environment</span><span class="p">)</span>
</div></div><p>Last, some visitors contain a function to transform the output, for example to tidy it up, so you might want to call it</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">visitor_class</span><span class="o">.</span><span class="n">transform</span><span class="p">:</span>
   <span class="n">content</span> <span class="o">=</span> <span class="n">visitor_class</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</div></div><p>The code of the whole example is then</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mau</span> <span class="kn">import</span> <span class="n">Mau</span><span class="p">,</span> <span class="n">load_visitors</span>

<span class="n">visitor_classes</span> <span class="o">=</span> <span class="n">load_visitors</span><span class="p">()</span>
<span class="n">visitor_class</span> <span class="o">=</span> <span class="n">visitors</span><span class="p">[</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">html</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;]</span>

<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">some_var</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="mi">42</span>
<span class="p">}</span>

<span class="n">custom_templates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">header</span><span class="o">.</span><span class="n">html</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="o">&amp;</span><span class="c1">#x27;&amp;lt;h{{ level }} id=&amp;quot;{{ anchor }}&amp;quot;&amp;gt;{{ value }}&amp;lt;/h{{ level }}&amp;gt;&amp;#x27;,</span>
<span class="p">}</span>
<span class="n">templates_directory</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="nb">dir</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>

<span class="n">mau</span> <span class="o">=</span> <span class="n">Mau</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">path</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;,</span>
    <span class="n">visitor_class</span><span class="o">=</span><span class="n">visitor_class</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
    <span class="n">custom_templates</span><span class="o">=</span><span class="n">custom_templates</span><span class="p">,</span>
    <span class="n">templates_directory</span><span class="o">=</span><span class="n">templates_directory</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Some</span> <span class="n">Mau</span> <span class="n">text</span> <span class="n">contained</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">string</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>
<span class="n">lexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">run_lexer</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">run_parser</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">tokens</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mau</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">environment</span><span class="p">)</span>

<span class="k">if</span> <span class="n">visitor_class</span><span class="o">.</span><span class="n">transform</span><span class="p">:</span>
   <span class="n">content</span> <span class="o">=</span> <span class="n">visitor_class</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</div></div><h2 id="using-mau-in-pelican-a590">Using Mau in Pelican</h2><p>You can use Mau to write posts and pages in Pelican. First you need to install the plugin that enables it</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>pip install pelican-mau-reader
</div></div><p>You can see the updated documentation about the plugin on <a href="https://github.com/pelican-plugins/mau-reader">the project page</a> but overall you just need to follow the instructions in this paragraph.</p><p>The basic usage of the plugin is simple. Every file in your content directory that ends with <code>.mau</code> will be processed by it, and you need to specify metadata using Mau&#x27;s variables under the namespace <code>pelican</code>. For example</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>:pelican.title:This is a post written with Mau
:pelican.date:2021-02-17 13:00:00
:pelican.modified:2021-02-17 14:00:00
:pelican.category:tests
:pelican.tags:foo, bar, foobar
:pelican.summary:I have a lot to write
</div></div><p>The syntax <code>:name:value</code> is used by Mau to create variables and you can learn more about it in the dedicated chapter.</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><p></p><p></p><div class="default"><div class="content"><h1 id="basic-syntax-1605">Basic syntax</h1></div></div><blockquote><p>Some of the newer ones are having trouble because they never really mastered some basic techniques, but they’re working hard and improving.</p><cite><p>Orson Scott Card, &quot;Ender&#x27;s Game&quot; (1985)</p></cite></blockquote><p>This and the following chapters will give you an overview of the basic syntax for paragraphs, styles, and inline elements like links and images. If you are familiar with either Markdown or Asciidoctor none of these will be a surprise to you, but I will describe everything assuming the reader doesn&#x27;t know any markup language.</p><p>I will assume you followed the instructions in the previous chapter and know how to run Mau in a stand-alone fashion, or that you are running it in Pelican. Either way, I will refer to generic input and output, meaning respectively the Mau source and the final result. Unless explicitly stated, the rest of the book will use the HTML output format.</p><p>I will show the source code in a block like this</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is Mau source code
</div></div><p>If useful, the resulting HTML code will be shown in a block like this</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>The resulting HTML code<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="content"><p>The rendered version of the resulting HTML will be shown with an aside like</p></div></div><div class="rendered"><div class="content"><p>This is the rendered output</p></div></div><div class="default"><div class="content"><p>Please keep in mind that the resulting HTML I will show is rendered using this website&#x27;s CSS, so some of the styles might differ when you open your output file with your browser.</p></div></div><p>When showing the HTML output I will skip the boilerplate to keep examples compact and readable. When you see a block with the resulting HTML like</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>The resulting HTML code<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><p>the full output is actually</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>html<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>head<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/head<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>body<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>The resulting HTML code<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/body<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/html<span class="ni">&amp;gt;</span>
</div></div><p>Finally, remember that both Markdown and Asciidoctor have a fixed rendering, while the output in Mau is ruled by templates. What you see in the output HTML and in the rendered boxes is the result of Mau&#x27;s default templates, but those can be overridden at any time, as we will see in a later chapter.</p><p>At the end of this book you will find a description of the attributes each element available in Mau exposes to the template engine.</p><h2 id="paragraphs-0a9d">Paragraphs</h2><p>The simplest element in Mau is a line of text that forms a paragraph</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a line of text.
</div></div><div class="rendered"><div class="content"><p>This is a line of text.</p></div></div><p>Adjacent lines of text are automatically joined into a single paragraph, so both</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence. And another sentence.
</div></div><p>and </p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence.
And another sentence.
</div></div><p>will both be rendered as</p><div class="rendered"><div class="content"><p>This is a sentence. And another sentence.</p></div></div><p>To separate paragraphs you need to insert one or more empty lines. For example</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence.

And another sentence.
</div></div><p>and </p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence.



And another sentence.
</div></div><p>will both be rendered as</p><div class="rendered"><div class="content"><p>This is a sentence.</p>
<p>And another sentence.</p></div></div><h2 id="comments-e6fa">Comments</h2><p>Mau supports both single-line and multi-line comments. A single line comment uses double slashes</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence.

And another sentence.

// This is a comment and won&amp;#x27;t be rendered
</div></div><div class="rendered"><div class="content"><p>This is a sentence.</p>
<p>And another sentence.</p></div></div><p>Multi-line comments are surrounded by four slashes on a separate line</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a sentence.

And another sentence.

////
This is also a comment
but it&amp;#x27;s spread on
multiple lines
for fun and to be a
little more readable
////
</div></div><div class="rendered"><div class="content"><p>This is a sentence.</p>
<p>And another sentence.</p></div></div><h2 id="arguments-aaff">Arguments</h2><p>As we will see later, some advanced commands in Mau accept arguments, which are not too different from standard function arguments in programming languages. The most important thing to remember is that Mau values are always strings, so arguments do not really have types.</p><p>Arguments can appear between round brackets <code>()</code>, square brackets <code>[]</code>, or directly after a command, depending on the context. This will be clearly specified in each section when arguments are discussed.</p><p>Arguments can be <strong>unnamed</strong> or <strong>named</strong>. An unnamed argument has just a value, for example <code>html</code>, while a named one has a key and a value linked by an equal sign, like <code>language=html</code>. There can&#x27;t be a space between the key and the value, so an argument like <code>language = html</code> is invalid.</p><p>Multiple arguments are separated by commas, optionally followed by one or more spaces. So, <code>source,html</code> and <code>source, html</code> are both valid, and the same is valid for named arguments, as <code>source,language=html</code> and <code>source, language=html</code> are equally accepted by the parser.</p><p>In the documentation, arguments will be given uppercase (e.g. <code>TYPE</code>), and named ones will followed by an equal sign (e.g. <code>LANGUAGE=</code>). You can avoid specifying the key if you pass argument values respecting the order provided in the documentation. So, if in a certain context you have to provide <code>TYPE, LANGUAGE=</code> you can either give <code>source, html</code> or <code>source, language=html</code>. Unnamed arguments can never follow named ones.</p><p>If an argument contains one or more spaces or commas you need to surround it with quotes, e.g. <code>attribution="J.R.R. Tolkien"</code> or <code>classes="class1,class2"</code>.</p><p>If the arguments are surrounded by braces you should use quotes also whenever the value contains the closing bracket. E.g. <code>(attribution="The (real) author")</code>. Here, the <code>)</code> after <code>real</code> would be considered the closing bracket if not surrounded by quotes.</p><p>If you need to pass quotes as value of an argument you need to escape them, e.g. <code>attribution="The so-called \"author\""</code>.</p><h3 id="tags-e9ff">Tags</h3><p>Tags are special arguments prefixed by <code>#</code>. Whenever Mau finds an unnamed argument that starts with <code>#</code> it will strip the prefix and collect the argument in a separate list called <code>tags</code> (see the chapter about the node format). Tags are useful to categorise elements and apply special formatting.</p><p>For example the arguments list <code>source, language=html, #custom</code> contains the tag <code>custom</code> (plase note the missing <code>#</code>).</p><h2 id="macros-a0ec">Macros</h2><p>Mau allows you to run functions called &quot;macros&quot;. Macros always come in the form <code>[NAME](ARGUMENTS)</code> where <code>NAME</code> is the name of the macro and <code>ARGUMENTS</code> is a string formatted as described in the previous section. Built-in macros will be described in the following chapters.</p><h2 id="include-other-files-e123">Include other files</h2><p>So far Mau has a basic support for including other files through the directive <code>#include</code>. Directives are special commands that are processed before the Mau code is properly parsed</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::#include:/path/to/file.mau
</div></div><p>Since the inclusion happens during the very first stages of the processing, you can also include files inside blocks (see the dedicated chapter).</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="text-formatting-eb5f">Text formatting</h1></div></div><blockquote><p>Leafing through the pages, he saw the book was printed in two colours. There seemed to be no pictures, but there were large, beautiful capital letters at the beginning of the chapters. </p><cite><p>Michael Ende, &quot;The Neverending Story&quot; (1979)</p></cite></blockquote><h2 id="basic-styles-90ce">Basic styles</h2><p>Inside paragraphs (and in other elements that support it) you can use text formatting which allows you to give text a certain style. Text formatting is done through symbols, enclosing a set of words between two identical symbols. Currently Mau supports stars (<code>*</code>), underscores (<code>_</code>), caret (<code>^</code>), tilde (<code>~</code>), and backticks (<code></code>`).</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>Stars identify *strong* text.

Underscores for _emphasized_ text.

Carets for ^superscript^ and tildes for ~subscript~.

Backticks are used for `verbatim` text.
</div></div><div class="rendered"><div class="content"><p>Stars identify <strong>strong</strong> text.</p>
<p>Underscores for <em>emphasized</em> text.</p>
<p>Carets for <sup>superscript</sup> and tildes for <sub>subscript</sub>.</p>
<p>Backticks are used for <code>verbatim</code> text.</p></div></div><hr><p>Text styles can be used together but backticks have a very strong behaviour in Mau</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>You can have _*strong and empashized*_ text.

You can also apply styles to _*`verbatim`*_.

But verbatim will `_*preserve*_` them.
</div></div><div class="rendered"><div class="content"><p>You can have <em><strong>strong and empashized</strong></em> text.</p>
<p>You can also apply styles to <em><strong><code>verbatim</code></strong></em>.</p>
<p>But verbatim will <code>_*preserve*_</code> them.</p></div></div><hr><p>Styles can be applied to only part of a word and do not need spaces</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>*S*trategic *H*azard *I*ntervention *E*spionage *L*ogistics *D*irectorate

It is completely _counter_intuitive.

Parts of words can be ^super^script or ~sub~script.

There are too many `if`s in this function.
</div></div><div class="rendered"><div class="content"><p><strong>S</strong>trategic <strong>H</strong>azard <strong>I</strong>ntervention <strong>E</strong>spionage <strong>L</strong>ogistics <strong>D</strong>irectorate</p>
<p>It is completely <em>counter</em>intuitive.</p>
<p>Parts of words can be <sup>super</sup>script or <sub>sub</sub>script.</p>
<p>There are too many <code>if</code>s in this function.</p></div></div><hr><p>Using a single style marker doesn&#x27;t trigger any effect. If you need to use two of them in the sentence, though, you have to escape at least one</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>You can use _single *markers.

But you \_need\_ to escape pairs.

Even though you can escape \_just one_ of the two.

If you have \_more than two\_ it&amp;#x27;s better to just \_escape\_ all of them.

Oh, this is valid for `verbatim as well.
</div></div><div class="rendered"><div class="content"><p>You can use _single *markers.</p>
<p>But you _need_ to escape pairs.</p>
<p>Even though you can escape _only one_ of the two.</p>
<p>If you have _more than two_ it&#x27;s better to just _escape_ all of them.</p>
<p>Oh, this is valid for `verbatim as well.</p></div></div><h2 id="text-classes-e9ce">Text classes</h2><p>You can assign specific classes to part of the text. The way classes are used and rendered depends on the output format. If the output is HTML, those will become CSS classes, while PDF output at the moment doesn&#x27;t do anything specifc. To give text a class use the macro <code>class</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is [class](&amp;quot;text wrapped&amp;quot;, myclass) in a class.
</div></div><p>The HTML output of the code above is</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is <span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>myclass<span class="ni">&amp;quot;&amp;gt;</span>text wrapped<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span> in a class.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><hr><p>You can specify multiple classes providing them in a comma-separated string</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is [class](&amp;quot;text wrapped&amp;quot;, &amp;quot;myclass1,myclass2&amp;quot;) in multiple classes.
</div></div><p>Resulting in</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is <span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>myclass1 myclass2<span class="ni">&amp;quot;&amp;gt;</span>text wrapped<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span> in multiple classes.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><p>Please note that the text passed to the macro <code>class</code> can contain Mau code such as styles.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is [class](&amp;quot;*text with styles* _wrapped_&amp;quot;, &amp;quot;myclass&amp;quot;) in a class.
</div></div><h2 id="horizontal-line-7b5d">Horizontal line</h2><p>You can add a separator or horizontal line using three dashes <code>---</code> on a separate line.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>---
</div></div><div class="rendered"><div class="content"><hr></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="links-ca15">Links</h1></div></div><blockquote><p>I had to nod. I was not unaware of the weakness of that link in my chain of speculations. Still, there were so many unknowns... I could offer alternatives, such as Random then did, but guesses prove nothing.</p><cite><p>Roger Zelazny, &quot;The Chronicles of Amber - Sign of the Unicorn&quot; (1975)</p></cite></blockquote><p>Since markup languages are mostly used to write hyperlinked documents, links play a big part in the syntax. Mau&#x27;s implementation of links uses a syntax shared by all macros in the language (see the chapter about macros)</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>The source code can be found
at [link](https://github.com/Project-Mau/mau).
</div></div><div class="rendered"><div class="content"><p>The source code can be found at <a href="https://github.com/Project-Mau/mau">https://github.com/Project-Mau/mau</a>.</p></div></div><p>The values between round brackets are arguments, as <code>link</code> is a macro.</p><h2 id="add-text-to-the-link-687e">Add text to the link</h2><p>You can add an optional text to the link that will replace the URL in the rendered text</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>The source code can be found
on [link](https://github.com/Project-Mau/mau, GitHub).
</div></div><div class="rendered"><div class="content"><p>The source code can be found on <a href="https://github.com/Project-Mau/mau">GitHub</a>.</p></div></div><h2 id="using-spaces-and-quotes-8e5a">Using spaces and quotes</h2><p>If the title contains spaces or the closing parenthesis <code>)</code> you need to wrap it between double quotes</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>The source code can be found
on [link](https://github.com/Project-Mau/mau, &amp;quot;the GitHub page&amp;quot;).
</div></div><div class="rendered"><div class="content"><p>The source code can be found on <a href="https://github.com/Project-Mau/mau">the GitHub page</a>.</p></div></div><hr><p>Should you need to add quotes to the title you will have to escape them</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>The main [link](https://github.com/Project-Mau/mau, &amp;quot;\&amp;quot;repository\&amp;quot;&amp;quot;).
</div></div><div class="rendered"><div class="content"><p>The main <a href="https://github.com/Project-Mau/mau">"repository"</a>.</p></div></div><hr><p>The same rules are valid for the URL</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>A [link](&amp;quot;https://example.org/?q=[a b]&amp;quot;,&amp;quot;URL with special characters&amp;quot;).
</div></div><div class="rendered"><div class="content"><p>A <a href="https://example.org/?q=[a b]">URL with special characters</a>.</p></div></div><h2 id="mailto-links-c1b0">Mailto links</h2><p>Mailto links can be created with the <code>mailto</code> macro, which works like the <code>link</code> macro described above.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>Get in touch at [mailto](info@example.com).
</div></div><div class="rendered"><div class="content"><p>Get in touch at <a href="mailto:info@example.com">info@example.com</a>.</p></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="headers-a12c">Headers</h1></div></div><blockquote><p>The abbot gave him a brief glare and began reading. The silence was awkward. “You found this over in the ‘Unclassified’ section, I believe?” he asked after a few seconds.</p><cite><p>Walter M. Miller Jr., &quot;A Canticle for Leibowitz&quot; (1959)</p></cite></blockquote><p>To properly structure some text you need to divide it into sections and the best way to highlight sections is through headers. Mau supports them and automatically stores them in a table of context.</p><p>To create a header in Mau use the symbol <code>=</code> followed by the text of the header</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= A very important section
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>h1 id=<span class="ni">&amp;quot;</span>a-very-important-section<span class="ni">&amp;quot;&amp;gt;</span>A very important section<span class="ni">&amp;lt;</span>/h1<span class="ni">&amp;gt;</span>
</div></div><div class="rendered"><div class="content"><h1 id="a-very-important-section-ff82">A very important section</h1></div></div><p>As you can see Mau converts it into a tag <code>h1</code> and automatically assigns an ID to it. The level of the header is ruled by the number of <code>=</code> symbols that you use. So, to create a header of level 3 you can write</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>=== A less important section
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>h3 id=<span class="ni">&amp;quot;</span>a-less-important-section<span class="ni">&amp;quot;&amp;gt;</span>A less important section<span class="ni">&amp;lt;</span>/h3<span class="ni">&amp;gt;</span>
</div></div><div class="rendered"><div class="content"><h3 id="a-less-important-section-e940">A less important section</h3></div></div><h2 id="headers-and-toc-adb8">Headers and TOC</h2><p>Mau stores all headers in a Table of Contents that can be created with the command <code>::toc:</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= Main section

== Secondary section

== Another secondary section

=== A very specific section

::toc:
</div></div><p>This will be rendered as</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>h1 id=<span class="ni">&amp;quot;</span>main-section-06bc<span class="ni">&amp;quot;&amp;gt;</span>Main section<span class="ni">&amp;lt;</span>/h1<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>h2 id=<span class="ni">&amp;quot;</span>secondary-section-3cbf<span class="ni">&amp;quot;&amp;gt;</span>Secondary section<span class="ni">&amp;lt;</span>/h2<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>h2 id=<span class="ni">&amp;quot;</span>another-secondary-section-1dac<span class="ni">&amp;quot;&amp;gt;</span>Another secondary section<span class="ni">&amp;lt;</span>/h2<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>h3 id=<span class="ni">&amp;quot;</span>a-very-specific-section-feca<span class="ni">&amp;quot;&amp;gt;</span>A very specific section<span class="ni">&amp;lt;</span>/h3<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>ul<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#main-section-06bc<span class="ni">&amp;quot;&amp;gt;</span>Main section<span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>
      <span class="ni">&amp;lt;</span>ul<span class="ni">&amp;gt;</span>
        <span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#secondary-section-3cbf<span class="ni">&amp;quot;&amp;gt;</span>Secondary section<span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
        <span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#another-secondary-section-1dac<span class="ni">&amp;quot;&amp;gt;</span>Another secondary section<span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>
          <span class="ni">&amp;lt;</span>ul<span class="ni">&amp;gt;</span>
            <span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#a-very-specific-section-feca<span class="ni">&amp;quot;&amp;gt;</span>A very specific section<span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
          <span class="ni">&amp;lt;</span>/ul<span class="ni">&amp;gt;</span>
        <span class="ni">&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
      <span class="ni">&amp;lt;</span>/ul<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/ul<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="rendered"><div class="content"><h1 id="main-section-06bc">Main section</h1>
<h2 id="secondary-section-3cbf">Secondary section</h2>
<h2 id="another-secondary-section-1dac">Another secondary section</h2>
<h3 id="a-very-specific-section-feca">A very specific section</h3>
<div><ul><li><a href="#main-section-06bc">Main section</a><ul><li><a href="#secondary-section-3cbf">Secondary section</a></li><li><a href="#another-secondary-section-1dac">Another secondary section</a><ul><li><a href="#a-very-specific-section-feca">A very specific section</a></li></ul></li></ul></li></ul></div></div></div><p>You can avoid including a specific header in the TOC adding a tag and excluding it from the TOC using the argument <code>exclude_tag</code>. This will also exclude all children of that node.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= Section 1

== Section 1.1

[#notoc]
== Section 1.2

=== Section 1.2.1

== Section 1.3

::toc:exclude_tag=notoc
</div></div><div class="rendered"><div class="content"><h1 id="section-1-eb28">Section 1</h1>
<h2 id="section-1.1-d614">Section 1.1</h2>
<h2 id="section-1.2-ac5f">Section 1.2</h2>
<h3 id="section-1.2.1-2fac">Section 1.2.1</h3>
<h2 id="section-1.3-3297">Section 1.3</h2>
<div><ul><li><a href="#main-section-06bc">Main section</a><ul><li><a href="#secondary-section-3cbf">Secondary section</a></li><li><a href="#another-secondary-section-1dac">Another secondary section</a><ul><li><a href="#a-very-specific-section-feca">A very specific section</a></li></ul></li></ul></li></ul></div></div></div><p>This will exclude from the rendered TOC both <code>Section 1.2</code> and <code>Section 1.2.1</code>, but not <code>Section 1.3</code>.</p><h2 id="anchors-4338">Anchors</h2><p>Headers are automatically assigned an identifier by Mau, which is linked in the Table of Contents.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= A very important section
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>h1 id=<span class="ni">&amp;quot;</span>a-very-important-section<span class="ni">&amp;quot;&amp;gt;</span>A very important section<span class="ni">&amp;lt;</span>/h1<span class="ni">&amp;gt;</span>
</div></div><p>The identifier is generated by an internal function that takes into account the text and the level of the header to avoid clashes. However, the ID is NOT granted to be unique. The function that generates the identifier can be replaced when using Mau programmatically, providing it in the variable <code>mau.header_anchor_function</code>.</p><p>For example you can do something like</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">custom_header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">f</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;{</span><span class="n">text</span><span class="p">[:</span><span class="mi">5</span><span class="p">]}</span><span class="o">-</span><span class="p">{</span><span class="n">level</span><span class="p">}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>

<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">header_anchor_function</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="n">custom_header_anchor</span>
<span class="p">}</span>

<span class="o">...</span>

<span class="n">mau</span> <span class="o">=</span> <span class="n">Mau</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">path</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;,</span>
    <span class="n">visitor_class</span><span class="o">=</span><span class="n">visitor_class</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
<span class="p">)</span>
</div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="variables-6933">Variables</h1></div></div><blockquote><p>It was wrong to have a third party present when I confronted you. It introduced one variable too many. It is a mistake that must be paid for, I suppose.</p><cite><p>Isaac Asimov, &quot;Second Foundation&quot; (1953)</p></cite></blockquote><p>Mau supports variables of two types: strings and booleans. You can define variables at any point in a Mau file with the syntax <code>:NAME:VALUE</code> and then insert the value using the syntax <code>{NAME}</code>. For example</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:answer:42

The Answer to the Ultimate Question of Life,
the Universe, and Everything is {answer}.
</div></div><div class="rendered"><div class="content"><p>The Answer to the Ultimate Question of Life, the Universe, and Everything is 42.</p></div></div><hr><p>Variables can be used in several contexts. In paragraphs, headers, and footnotes they are useful to place constant strings that are repeated over and over and might need to be changed. Variables are replaced very early in the Mau translation process, so they can contain Mau code.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:answer:*42*
:wikipedia_link:[link](&amp;quot;https://en.wikipedia.org/wiki/42_(number)&amp;quot;)

The Answer to the Ultimate Question of Life,
the Universe, and Everything is {answer}.

You can learn more about it here {wikipedia_link}
</div></div><div class="rendered"><div class="content"><p>The Answer to the Ultimate Question of Life, the Universe, and Everything is <strong>42</strong>.</p>
<p>You can learn more about it here <a href="https://en.wikipedia.org/wiki/42_(number)">https://en.wikipedia.org/wiki/42_(number)</a></p></div></div><p>Variables can also be used in block definitions, see the chapter about blocks for more information.</p><hr><p>You can prevent variable replacement escaping the curly braces</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:answer:42

The Answer to the Ultimate Question of Life,
the Universe, and Everything is \{answer\}
</div></div><div class="rendered"><div class="content"><p>The Answer to the Ultimate Question of Life, the Universe, and Everything is {answer}</p></div></div><hr><p>As curly braces are used a lot in programming languages, Mau automatically escapes them when they are included in verbatim text</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:answer:42

The Answer to the Ultimate Question of Life,
the Universe, and Everything is `{answer}`
</div></div><div class="rendered"><div class="content"><p>The Answer to the Ultimate Question of Life, the Universe, and Everything is <code>{answer}</code></p></div></div><h2 id="boolean-variables-4e3a">Boolean variables</h2><p>Variables without a value will automatically become booleans. The default value is true, which will become <code>True</code> when printed</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>:flag:

The flag is {flag}.
</div></div><div class="rendered"><div class="content"><p>The flag is True.</p></div></div><p>You can create a false boolean variable negating it with an exclamation mark</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:!flag:

The flag is {flag}.
</div></div><div class="rendered"><div class="content"><p>The flag is False.</p></div></div><p>When printed, boolean variables will be either <code>True</code> or <code>False</code>, which might not be very effective. They are however useful as flags in conditional blocks, see the chapter about blocks for more information.</p><h2 id="namespaces-a267">Namespaces</h2><p>Variables can be created under a specific namespace using a dotted syntax</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:value:5
:module.value:6

The values are {value} and {module.value}.
</div></div><div class="rendered"><div class="content"><p>The values are 5 and 6.</p></div></div><hr><p>Mau&#x27;s configuration values are available under the <code>mau</code> namespace (see the section about configuration for more information).</p><p>Namespaces are useful to communicate with external tools. For example, the Pelican metadata of this page are specified as</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:pelican.title:Variables
:pelican.slug:maubook-variables
:pelican.series:Mau - A template-based markup language
</div></div><p>which allows the Mau reader plugin to extract them and pass them to Pelican.</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="lists-and-footnotes-fa2b">Lists and footnotes</h1></div></div><blockquote><p>- “Most people will tell you they know their weaknesses. When asked, they tell you, ‘Well, for one thing I’m overgenerous.’ Come on, then; list yours if you must. That’s what innkeepers are for.”</p>
<p>- “Well, for one thing I’m overgenerous, especially to innkeepers.”</p><cite><p>David Gemmell, &quot;Legend&quot; (1984)</p></cite></blockquote><h2 id="lists-f4c1">Lists</h2><p>Mau supports the creation of lists. You can create unordered lists using one or more characters <code>*</code> according to the level of the element</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>* List item
** Nested list item
*** Nested list item
* List item
** Another nested list item
* List item
</div></div><div class="rendered"><div class="content"><ul><li>List item<ul><li>Nested list item<ul><li>Nested list item</li></ul></li></ul></li><li>List item<ul><li>Another nested list item</li></ul></li><li>List item</li></ul></div></div><p>and use the character <code>#</code> to create an ordered list</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span># Step 1
# Step 2
## Step 2a
## Step 2b
# Step 3
</div></div><div class="rendered"><div class="content"><ol><li>Step 1</li><li>Step 2<ol><li>Step 2a</li><li>Step 2b</li></ol></li><li>Step 3</li></ol></div></div><hr><p>You can mix ordered and unordered lists</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>* List item
** Nested list item
### Ordered item 1
### Ordered item 2
### Ordered item 3
* List item
</div></div><div class="rendered"><div class="content"><ul><li>List item<ul><li>Nested list item<ol><li>Ordered item 1</li><li>Ordered item 2</li><li>Ordered item 3</li></ol></li></ul></li><li>List item</li></ul></div></div><hr><p>All spaces before or after the initial characters are ignored.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>* List item
  ** Nested list item
    *** Nested list item
*   List item
  **    Another nested list item (indented)
*   List item
</div></div><div class="rendered"><div class="content"><ul><li>List item<ul><li>Nested list item<ul><li>Nested list item</li></ul></li></ul></li><li>List item<ul><li>Another nested list item (indented)</li></ul></li><li>List item</li></ul></div></div><h2 id="footnotes-4139">Footnotes</h2><p>You can insert a footnote including a definition and a reference. A definition contains the text of the footnote and is created with a block of type <code>footnote</code> (see chapter about blocks) and giving it a name</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote, thename]
----
This is the text of the footnote.
----
</div></div><p>Then you need to reference the footnote in a paragraph using the macro <code>footnote</code> and the name</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a paragraph with a note[footnote](thename).
</div></div><p>Mau doesn&#x27;t automatically include the definition of the footnote in the output. This has to be done with the command <code>::footnotes:</code></p><div class="default"><div class="content"><div class="highlight"><pre><span></span>This is a paragraph with a note[footnote](thename).

[footnote, thename]
----
This is the text of the footnote.
----

::footnotes:
</div></div><div class="rendered"><div class="content"><p>This is a paragraph with a note<sup>[<a id="fr-ebe297e9-1" href="#">1</a>]</sup>.</p>
<div id="_footnotes"><div id=""><a href="#fr-ebe297e9-1">1</a> <p>This is the text of the footnote.</p></div></div></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="images-96e8">Images</h1></div></div><blockquote><p>Strange images appeared and vanished, flickering at the extreme limits of visibility - vast faces, enormous hands, and things Garion could not name. The turret itself trembled as the two dreadful old men ripped open the fabric of reality itself to grasp weapons of imagination or delusion.</p><cite><p>David Eddings, &quot;Magician&#x27;s Gambit&quot; (1983)</p></cite></blockquote><p>You can include images in Mau documents, both as stand-alone elements and inline, mixed with text.</p><h2 id="stand-alone-images-7ffa">Stand-alone images</h2><p>Images can be included in the document with the command <code><<</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>&amp;lt;&amp;lt; image:https://via.placeholder.com/150
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="imageblock"><div class="content"><img src="https://via.placeholder.com/150" /></div></div></div></div></div></div><hr><p>You can add a caption to the image using a title</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>. This is the caption
&amp;lt;&amp;lt; image:https://via.placeholder.com/150
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>imageblock<span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>img src=<span class="ni">&amp;quot;</span>https://via.placeholder.com/150<span class="ni">&amp;quot;</span>/<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span>This is the caption<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="imageblock"><div class="content"><img src="https://via.placeholder.com/150" /><div class="title">This is the caption</div></div></div></div></div></div></div><hr><p>You can also specify the alternate text with the attribute <code>alt_text</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[alt_text=&amp;quot;Description of the image&amp;quot;]
&amp;lt;&amp;lt; image:https://via.placeholder.com/150
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>imageblock<span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>img src=<span class="ni">&amp;quot;</span>https://via.placeholder.com/150<span class="ni">&amp;quot;</span> alt=<span class="ni">&amp;quot;</span>Description of the image<span class="ni">&amp;quot;</span>/<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="imageblock"><div class="content"><img src="https://via.placeholder.com/150" /></div></div></div></div></div></div><h2 id="inline-images-7d4a">Inline images</h2><p>Images can be added inline with the macro <code>image</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a paragraph with an image [image](https://via.placeholder.com/30,alt_text=&amp;quot;A placeholder&amp;quot;)
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><p>This is a paragraph with an image <span class="image"><img src="https://via.placeholder.com/30" alt="A placeholder"></span></p></div></div></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="blocks-4c06">Blocks</h1></div></div><blockquote><p>The chamber was lit by a wide shaft high in the further eastern wall; it slanted upwards and, far above, a small square patch of blue sky could be seen. The light of the shaft fell directly on a table in the middle of the room: a single oblong block, about two feet high, upon which was laid a great slab of white stone.</p><cite><p>J.R.R. Tolkien, &quot;The Lord of the Rings - The Fellowship of the Ring&quot; (1954)</p></cite></blockquote><p>Mau has the concept of blocks, which are parts of the text delimited by fences</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>----
This is a block
----
</div></div><p>You can use any sequence of 4 identical characters to delimit a block, provided this doesn&#x27;t clash with other syntax like the one used for headers or for comments</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>++++
This is a block
++++

%%%%
This is another block
%%%%
</div></div><p>If you need to insert 4 identical characters on a line for some reasons, you have to escape the first of them</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>These are paragraphs.

\++++

Just standard paragraphs.
</div></div><div class="rendered"><div class="content"><p>These are paragraphs.</p>
<p>++++</p>
<p>Just standard paragraphs.</p></div></div><hr><p>Blocks isolate the text they contain and can apply special formatting rules to it. The idea behind blocks is that the text inside them can be formatted using special templates that apply to the whole content and not only to a single element such as a paragraph. They are therefore useful to create annotations and asides, to include source code, or to implement custom processing such as isolating headers from the main document.</p><p>In this and the next chapters we will explore blocks in depth and learn about all their features. As we will see, they can be heavily customised, but for now let&#x27;s consider the default rendering of a block in HTML</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>----
This is a block
----
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is a block<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><p>In this manual, the default rendering of a block is the following</p><div class="rendered"><div class="content"><p>This paragraph is contained in a default block.</p></div></div><h2 id="block-titles-5c96">Block titles</h2><p>Blocks can have titles, created before the block by a line starting with a dot </p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>. The title
----
This is a block
----
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span>The title<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is a block<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="title">The title</div><div class="content"><p>This is a block</p></div></div></div></div></div></div><p>The space between the dot and the title is optional</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>.The title
----
This is a block
----
</div></div><h2 id="block-attributes-e9ad">Block attributes</h2><p>Blocks can have attributes, specified between square brackets before the opening fence. If attributes are specified, the first attribute is always the type of the block.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside]
----
This is a block of type `aside`
----
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>aside<span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is a block of type <span class="ni">&amp;lt;</span>code<span class="ni">&amp;gt;</span>aside<span class="ni">&amp;lt;</span>/code<span class="ni">&amp;gt;&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="aside"><div class="content"><p>This is a block of type <code>aside</code></p></div></div></div></div></div></div><p>Blocks without an explicit type have the type <code>default</code> so the following two definitions give the same result</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>----
This is a default block
----

[default]
----
This is a default block
----
</div></div><p>Types are important as they can render the block in different ways. In the next chapter we will explore built-in blocks, and later we will discuss templates that allow us to further customise how blocks are rendered.</p><hr><p>You can specify title and attributes in any order.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>. Title of the block
[aside]
----
This is a block of type `aside` and a title
----

[aside]
. Title of the block
----
This is a block of type `aside` and a title
----
</div></div><p>Title and attributes are consumed by the first block that appears after them, so they don&#x27;t need to be adjacent to it.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>. Title of the block

[aside]

----
This is a block of type `aside`
----
</div></div><h2 id="secondary-content-e57f">Secondary content</h2><p>Blocks have the concept of <em>secondary content</em>, which is any paragraph that is adjacent to the closing fence. This paragraph is included in the block metadata and used according to the type of block (see the chapter about source code blocks, for example). The default block simply discards that content</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>----
Content of the block
----
Secondary content that won&amp;#x27;t be in the output

This is not part of the block
</div></div><div class="rendered"><div class="content"><div class="default"><div class="content"><p>Content of the block</p></div></div>
<p>This is not part of the block</p></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="blocks-built-in-types-and-other-features-3396">Blocks: built-in types and other features</h1></div></div><blockquote><p>Over an inner wall he saw the pinnacles of strangely shaped towerlike structures. One of these towers was built in, or projected into the court in which he found himself, and a broad stair led up to it, along the side of the wall.</p><cite><p>Robert E. Howard, &quot;The Pool of the Black One&quot; (1933)</p></cite></blockquote><p>Mau provides some built-in block types that are rendered in a different way.</p><h2 id="quotes-6131">Quotes</h2><p>The simplest block type that Mau provides is called <code>quote</code>. This block&#x27;s content is the quote itself, while the secondary content is the source of the quote, commonly called attribution.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[quote]
----
Learn about the Force, Luke.
----
_Star Wars_, 1977
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>blockquote<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>Learn about the Force, Luke.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>cite<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;&amp;lt;</span>em<span class="ni">&amp;gt;</span>Star Wars<span class="ni">&amp;lt;</span>/em<span class="ni">&amp;gt;</span>, 1977<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/cite<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/blockquote<span class="ni">&amp;gt;</span>
</div></div><p>You can see the output of blocks <code>quote</code> rendered at the beginning of each chapter in this book.</p><h2 id="admonitions-9f32">Admonitions</h2><p>Mau supports admonitions, special blocks that are meant to be highlighted and separated from the rest of the text. For example, admonitions can be rendered with an icon on the side, or with a different background and a title. This generally includes asides, notes, warnings, tips, and other similar blocks of text.</p><p>The block is specified as <code>[admonition, CLASS, ICON, LABEL]</code>.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[admonition, note, &amp;quot;fa-solid fa-circle-info&amp;quot;, &amp;quot;Info&amp;quot;]
----
This is my note
----
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>admonition note<span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>i class=<span class="ni">&amp;quot;</span>fa-solid fa-circle-info<span class="ni">&amp;quot;</span>/<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span>Info<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span>
      <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is my note<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="rendered"><div class="content"><div class="admonition note"><i class="fa-solid fa-circle-info"></i><div class="content"><div class="title">Info</div><div><p>This is an example of admonition rendered with a title and a specific colour for the border and the background.</p></div></div></div></div></div><h2 id="block-conditions-c1cb">Block conditions</h2><p>You can conditionally render a block according to the result of a test. The test is expressed in the form <code>CONDITION:VARIABLE:[VALUE]</code> and is passed to the block through the attribute <code>condition</code>.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>:render:yes

[aside, condition=&amp;quot;if:render:yes&amp;quot;]
----
This will be rendered
----

[aside, condition=&amp;quot;if:render:no&amp;quot;]
----
This will not be rendered
----
</div></div><div class="rendered"><div class="content"><div class="aside"><div class="content"><p>This will be rendered</p></div></div></div></div><p>You can use boolean values leaving out the <code>VALUE</code> part</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>:render:

[aside, condition=&amp;quot;if:render:&amp;quot;]
----
This will be rendered
----

:!render:

[aside, condition=&amp;quot;if:render:&amp;quot;]
----
This will not be rendered
----
</div></div><div class="rendered"><div class="content"><div class="aside"><div class="content"><p>This will be rendered</p></div></div></div></div><p>You can reverse the condition using <code>ifnot</code></p><div class="default"><div class="content"><div class="highlight"><pre><span></span>:render:

[aside, condition=&amp;quot;ifnot:render:&amp;quot;]
----
This will not be rendered
----
</div></div><div class="rendered"><div class="content"></div></div><p>Conditions can be used even without the block type, which can be used to conditionally render standard paragraphs.</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>:detailed:

[condition=&amp;quot;if:detailed:&amp;quot;]
----
This will be rendered only when the variable `detailed` is true.
----

[condition=&amp;quot;ifnot:detailed:&amp;quot;]
----
This will be rendered only when the variable `detailed` is false
----
</div></div><h2 id="block-classes-7026">Block classes</h2><p>You can add custom classes to a block using the attribute <code>classes</code>, which is a comma separated list of names. These classes will be then rendered according to the output format. For example, in HTML these will become CSS classes.</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>[aside, classes=&amp;quot;myclass1,myclass2&amp;quot;]
----
This is a block of type `aside` with additional classes
----
</div></div><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>aside myclass1 myclass2 <span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>This is a block of type <span class="ni">&amp;lt;</span>code<span class="ni">&amp;gt;</span>aside<span class="ni">&amp;lt;</span>/code<span class="ni">&amp;gt;</span> with additional classes<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><h2 id="including-content-e743">Including content</h2><p>As mentioned in the chapter about basic syntax, the directive <code>#include</code> can be used at any point (at the beginning of the line), and this means that the content of the block can be generated including the content of an external file.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside]
----
::#include:/path/to/important_aside.mau
----
</div></div><p>This might be very useful for <code>source</code> blocks (see the dedicated chapter)</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source, python]
----
::#include:/path/to/myscript.py
----
</div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="source-code-blocks-5c50">Source code blocks</h1></div></div><blockquote><p>The older authorities seemed rather more helpful than the newer ones, and Armitage concluded that the code of the manuscript was one of great antiquity, no doubt handed down through a long line of mystical experimenters.</p><cite><p>H.P. Lovecraft, &quot;The Dunwich Horror&quot; (1929)</p></cite></blockquote><p>For programmers, one of the most useful features of a markup language is source code blocks. Mau provides full support to source code highlighting, and allows you to highlight single lines and add callouts to the code to mark specific steps of the process or to add explanations.</p><h2 id="basic-source-blocks-4627">Basic source blocks</h2><p>Verbatim paragraphs and source code can be printed using blocks of type <code>source</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>. Source code
[source]
----
This is all verbatim.

== This is not a header

[These are not attributes]
----
</div></div><div class="rendered"><div class="content"><div class="default"><div class="title">Source code</div><div class="content"><div class="highlight"><pre><span></span>This is all verbatim.

== This is not a header

[These are not attributes]
</div></div></div></div><p>You can specify the language of the source code, that can be used by highlighting tools.</p><div class="default"><div class="content"><p>Highlighting in HTML is provided by <a href="https://pygments.org/">Pygments</a>. On the official website you can find the list of <a href="https://pygments.org/languages/">supported languages</a>.</p></div></div><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level):
    &amp;quot;&amp;quot;&amp;quot;
    A simple Python function
    &amp;quot;&amp;quot;&amp;quot;

    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]
    )  # pragma: no cover
----
</div></div><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>
    <span class="n">A</span> <span class="n">simple</span> <span class="n">Python</span> <span class="n">function</span>
    <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>

    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div></div></div></div><h2 id="callouts-39ed">Callouts</h2><p>Source blocks support callouts, that allow you to add notes to specific lines of code. Callouts are added at the end of the line between colons (e.g. <code>:1:</code>) the relative text is added to the secondary content of the block</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level)::1:
    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]:2:
    )  # pragma: no cover
----
1: The name of the function
2: Some memory-related wizardry
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span> <span class="callout">1</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span> <span class="callout">2</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div><div class="callouts"><table><tbody><tr><td><span class="callout">1</span></td><td>The name of the function</td></tr><tr><td><span class="callout">2</span></td><td>Some memory-related wizardry</td></tr></tbody></table></div></div></div></div>
<p>Callouts are rendered in HTML with <code>span</code> tags and the relative text is rendered in a table</p>
<div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
a=5:1:
----
1: A simple assignment
</div></div>
<div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>source<span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
    <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>highlight<span class="ni">&amp;quot;&amp;gt;</span>
      <span class="ni">&amp;lt;</span>pre<span class="ni">&amp;gt;</span>
	<span class="ni">&amp;lt;</span>span/<span class="ni">&amp;gt;</span>
	<span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>n<span class="ni">&amp;quot;&amp;gt;</span>a<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
	<span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>o<span class="ni">&amp;quot;&amp;gt;</span>=<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
	<span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>mi<span class="ni">&amp;quot;&amp;gt;</span>5<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
<span class="hll">	<span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>callout<span class="ni">&amp;quot;&amp;gt;</span>1<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</span>      <span class="ni">&amp;lt;</span>/pre<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>callouts<span class="ni">&amp;quot;&amp;gt;</span>
<span class="hll">    <span class="ni">&amp;lt;</span>table<span class="ni">&amp;gt;</span>
</span><span class="hll">      <span class="ni">&amp;lt;</span>tbody<span class="ni">&amp;gt;</span>
</span><span class="hll">	<span class="ni">&amp;lt;</span>tr<span class="ni">&amp;gt;</span>
</span><span class="hll">	  <span class="ni">&amp;lt;</span>td<span class="ni">&amp;gt;</span>
</span><span class="hll">	    <span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>callout<span class="ni">&amp;quot;&amp;gt;</span>1<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</span><span class="hll">	  <span class="ni">&amp;lt;</span>/td<span class="ni">&amp;gt;</span>
</span><span class="hll">	  <span class="ni">&amp;lt;</span>td<span class="ni">&amp;gt;</span>A simple assignment<span class="ni">&amp;lt;</span>/td<span class="ni">&amp;gt;</span>
</span><span class="hll">	<span class="ni">&amp;lt;</span>/tr<span class="ni">&amp;gt;</span>
</span><span class="hll">      <span class="ni">&amp;lt;</span>/tbody<span class="ni">&amp;gt;</span>
</span><span class="hll">    <span class="ni">&amp;lt;</span>/table<span class="ni">&amp;gt;</span>
</span>  <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div></div></div><p>The default delimiter for callouts is a colon <code>:</code>, but if that clashes with the syntax of your language you can pick a different one with the attribute <code>callouts</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source, python, callouts=&amp;quot;|&amp;quot;]
----
def header_anchor(text, level):|1|
    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]|2|
    )  # pragma: no cover
----
1: The name of the function
2: Some memory-related wizardry
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span> <span class="callout">1</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span> <span class="callout">2</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div><div class="callouts"><table><tbody><tr><td><span class="callout">1</span></td><td>The name of the function</td></tr><tr><td><span class="callout">2</span></td><td>Some memory-related wizardry</td></tr></tbody></table></div></div></div></div></div></div><hr><p>Callouts names are just strings, not manipulated by Mau, so you can use them out of order</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level)::1:
    return &amp;quot;h{}-{}-{}&amp;quot;.format(:3:
        level, quote(text.lower())[:20], str(id(text))[:8]:2:
    )  # pragma: no cover
----
1: The name of the function
2: Some memory-related wizardry
3: This is the return value
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span> <span class="callout">1</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="callout">3</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span> <span class="callout">2</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div><div class="callouts"><table><tbody><tr><td><span class="callout">1</span></td><td>The name of the function</td></tr><tr><td><span class="callout">2</span></td><td>Some memory-related wizardry</td></tr><tr><td><span class="callout">3</span></td><td>This is the return value</td></tr></tbody></table></div></div></div></div></div></div><p>Callouts are not limited to digits, you can use non-numeric labels</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level)::step1:
    return &amp;quot;h{}-{}-{}&amp;quot;.format(:step3:
        level, quote(text.lower())[:20], str(id(text))[:8]:step2:
    )  # pragma: no cover
----
1: The name of the function
2: Some memory-related wizardry
3: This is the return value
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span> <span class="callout">step1</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="callout">step3</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span> <span class="callout">step2</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div><div class="callouts"><table><tbody><tr><td><span class="callout">1</span></td><td>The name of the function</td></tr><tr><td><span class="callout">2</span></td><td>Some memory-related wizardry</td></tr><tr><td><span class="callout">3</span></td><td>This is the return value</td></tr></tbody></table></div></div></div></div></div></div><p>Callouts do not need to have a definition</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level)::1:
    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]:2:
    )  # pragma: no cover
----
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span> <span class="callout">1</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span> <span class="callout">2</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div></div></div></div></div></div><p>And you can reference them in the text using <code>[class](1, "callout")</code>, and rendering it accordingly.</p><h2 id="highlight-lines-a608">Highlight lines</h2><p>You can highlight lines using a callout with the special name <code>@</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python]
----
def header_anchor(text, level)::@:
    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]:@:
    )  # pragma: no cover
----
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="hll"><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
</span>    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="hll">        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span>
</span>    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div></div></div></div>
<p>Should you prefer to list the lines you want to highlight you can use Pygments directly, passing the configuration value <code>hl_lines</code> under the namespace <code>pygments</code></p>
<div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source,python,pygments.hl_lines=&amp;quot;1,3&amp;quot;]
----
def header_anchor(text, level):
    return &amp;quot;h{}-{}-{}&amp;quot;.format(
        level, quote(text.lower())[:20], str(id(text))[:8]
    )  # pragma: no cover
----
</div></div>
<div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">header_anchor</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">h</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">-</span><span class="p">{}</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">quote</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())[:</span><span class="mi">20</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">text</span><span class="p">))[:</span><span class="mi">8</span><span class="p">]</span>
    <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</div></div></div></div></div></div><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="footnotes-and-references-a3ab">Footnotes and references</h1></div></div><blockquote><p>And then I told him my story as I have written it here, omitting only any reference to my love for Dejah Thoris. He was much excited by the news of Helium&#x27;s princess and seemed quite positive that she and Sola could easily have reached a point of safety from where they left me.</p><cite><p>Edgar Rice Burroughs, &quot;A Princess of Mars&quot; (1912)</p></cite></blockquote><p>Footnotes are extremely useful to provide optional details to parts of the text, or to mention source material like books or papers. Mau has full support for footnotes with a syntax that comes from Markua (Leanpub&#x27;s Markdown dialect). Mau also expands the concept into references, that are a generalisation of footnotes.</p><h2 id="footnotes-4139">Footnotes</h2><p>Footnotes in Mau work through a macro, a block type, and a command.</p><p>The block type <code>footnote</code> contains the text of the footnote. The name of the footnote is a mandatory argument</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote, mynote]
----
This is the text of my footnote.
----
</div></div><p>Inside the block you can use Mau syntax, such as styles or links</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote, mynote]
----
_This_ is the *text* of my footnote.
----
</div></div><p>The macro <code>footnote</code> appears in a paragraph and represents the reference to the footnote, usually being rendered as a superscript small number. The only argument of the macro is the name of the referenced footnote.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are several markup languages available nowadays[footnote](mynote).
</div></div><p>The command <code>::footnotes:</code> inserts the list of footnotes and is useful for those output formats like HTML that do not include footnotes automatically.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are several markup languages available nowadays[footnote](mynote).

[footnote, mynote]
----
For example:

* [link](&amp;quot;HTML&amp;quot;, https://en.wikipedia.org/wiki/HTML)
* [link](&amp;quot;Markdown&amp;quot;, https://en.wikipedia.org/wiki/Markdown)
* [link](&amp;quot;TeX&amp;quot;, https://en.wikipedia.org/wiki/TeX)
----

::footnotes:
</div></div><div class="rendered"><div class="content"><p>There are several markup languages available nowadays<sup>[<a id="fr-5f4fc0c1-1" href="#">1</a>]</sup>.</p>
<div id="_footnotes"></div></div></div><p>Please note that the way footnotes are managed can be different according to the output format. If you are producing HTML output you need to insert the command as HTML has no concept of footnotes. TeX, instead, automatically creates the list of footnotes at the bottom of each page, so in that case you don&#x27;t need to render the list explicitly (see the chapter about templates).</p><h2 id="references-9665">References</h2><p>References are a generalisation of footnotes, and in principle they work in the same way through the macro <code>reference</code>, the block of type <code>reference</code>, and the command <code>references</code>.</p><p>Unlike footnotes that have just a name, though, references have a type, a name, and a category. The command <code>references</code> can be used to print them out selectively.</p><p>So, for example, a reference of type <code>links</code> with name <code>markup</code> is defined as</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are many markup languages[reference](links, markup).

[reference, links, markup]
----
For example:

* [link](&amp;quot;HTML&amp;quot;, https://en.wikipedia.org/wiki/HTML)
* [link](&amp;quot;Markdown&amp;quot;, https://en.wikipedia.org/wiki/Markdown)
* [link](&amp;quot;TeX&amp;quot;, https://en.wikipedia.org/wiki/TeX)
----
</div></div><p>If you include a category you need to specify it only in the macro</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are many markup languages[reference](links, markup, wikipedia).

[reference, links, markup]
----
For example:

* [link](&amp;quot;HTML&amp;quot;, https://en.wikipedia.org/wiki/HTML)
* [link](&amp;quot;Markdown&amp;quot;, https://en.wikipedia.org/wiki/Markdown)
* [link](&amp;quot;TeX&amp;quot;, https://en.wikipedia.org/wiki/TeX)
----
</div></div><p>The command <code>references</code> requires the type, and optionally accepts the category and the name</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::references:links

::references:links,wikipedia

::references:links,wikipedia,markup
</div></div><p>Each reference is uniquely identified by the tuple <code>(type, name)</code>, and the category can act as a subtype.</p><p>Footnotes can be considered references with the type <code>footnote</code> and no category. The code</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are several markup languages available nowadays[footnote](mynote).

[footnote, mynote]
----
For example:

* [link](&amp;quot;HTML&amp;quot;, https://en.wikipedia.org/wiki/HTML)
* [link](&amp;quot;Markdown&amp;quot;, https://en.wikipedia.org/wiki/Markdown)
* [link](&amp;quot;TeX&amp;quot;, https://en.wikipedia.org/wiki/TeX)
----

::footnotes:
</div></div><p>is equivalent to</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>There are several markup languages available nowadays[reference](footnote, mynote).

[reference, footnote, mynote]
----
For example:

* [link](&amp;quot;HTML&amp;quot;, https://en.wikipedia.org/wiki/HTML)
* [link](&amp;quot;Markdown&amp;quot;, https://en.wikipedia.org/wiki/Markdown)
* [link](&amp;quot;TeX&amp;quot;, https://en.wikipedia.org/wiki/TeX)
----

::references:footnote
</div></div><p>Keep in mind, however, that footnotes and references are rendered with different templates. In particular, output formats like TeX have a native support for footnotes but don&#x27;t know anything about references.</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="block-engines-and-custom-definitions-cb3c">Block engines and custom definitions</h1></div></div><blockquote><p>- “Impact minus twenty seconds, guys. . . ” said the computer.</p>
<p>- “Then turn the bloody engines back on!” bawled Zaphod.</p>
<p>- “OK, sure thing, guys,” said the computer.</p><cite><p>Douglas Adams, &quot;The Hitchhiker&#x27;s Guide to the Galaxy&quot; (1979)</p></cite></blockquote><p>So far we saw how Mau treats standard blocks, the built-in types <code>quote</code>, <code>admonition</code>, and <code>source</code>, and how to render blocks conditionally. Blocks have another advanced feature called <code>engine</code>, which rule the way Mau processes the content of the block.</p><h2 id="block-engines-5f75">Block engines</h2><p>In blocks, an <code>engine</code> is the way Mau processes content and attributes to create the values eventually passed to the template used to render the block.</p><p>When a block doesn&#x27;t define a specific engine the <code>default</code> one is used. Mau currently defines six engines:</p><ul><li><code>default</code></li><li><code>source</code></li><li><code>raw</code></li><li><code>mau</code></li><li><code>footnote</code></li><li><code>reference</code></li></ul><h3 id="default-7f82">Default</h3><p>The engine <code>default</code> processes the content of the block as Mau code using the variables defined previously in the document. It adds the headers found in the block to the global TOC and the footnotes to the list of the document footnotes.</p><p>This engine is used when no other engine is defined explicitly and is useful every time we need to customise the way the content is rendered in the final format but we want to keep the content as part of the document.</p><h3 id="raw-2db9">Raw</h3><p>The engine <code>raw</code> is useful every time we want to include text in the output format directly, as this engine doesn&#x27;t process the content at all. For example, if we are converting the Mau source in HTML and we want to add custom HTML code we can do it with</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside, engine=raw]
----
&amp;lt;div&amp;gt;This is a custom div written directly in HTML&amp;lt;/div&amp;gt;
----
</div></div><p>Please note that while the content of the block is not processed by Mau it is still rendered as any other block through templates. See the following chapters to find out how to include custom content without any wrapper.</p><h3 id="mau-ef4d">Mau</h3><p>As we saw previously, the engine <code>default</code> processes the content as Mau code and adds variables, headers and footnotes in the current document. The engine <code>mau</code> does the same, but treats it as isolated content, without loading the variables defined in the main document, and without adding headers and footnotes to the relative lists.</p><p>Using a command <code>::toc:</code> in a block rendered by the engine <code>mau</code>, for example, will include only the headers defined in the block itself.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside,engine=mau]
----
= Main section

== Secondary section

== Another secondary section

=== A very specific section

::toc:
----
</div></div><div class="default"><div class="content"><div class="rendered"><div class="content"><h1 id="main-section-06bc">Main section</h1>
<h2 id="secondary-section-3cbf">Secondary section</h2>
<h2 id="another-secondary-section-1dac">Another secondary section</h2>
<h3 id="a-very-specific-section-feca">A very specific section</h3>
<div><ul><li><a href="#main-section-06bc">Main section</a><ul><li><a href="#secondary-section-3cbf">Secondary section</a></li><li><a href="#another-secondary-section-1dac">Another secondary section</a><ul><li><a href="#a-very-specific-section-feca">A very specific section</a></li></ul></li></ul></li></ul></div></div></div></div></div><p>Please note that even with this engine the content of the block is still rendered in the current document. This means that with output formats like TeX that create their own TOC automatically such headers will still be part of the main document.</p><h3 id="source-8bad">Source</h3><p>The engine that processes source blocks is aptly called <code>source</code>. This engine scans the primary content for callouts and looks for their optional definitions in the secondary content.</p><p>Blocks of type <code>source</code> are a shortcut notation to use the engine <code>source</code>. The notation</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source]
----
Some source code
----
</div></div><p>is equivalent to</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[default, engine=source]
----
Some source code
----
</div></div><p>The explicit use of the engine <code>source</code> is useful to create custom source blocks that can behave like the built-in one but can be rendered in different ways. The way to do it will be shown in the chapter about templates.</p><h3 id="footnotes-and-references-346b">Footnotes and references</h3><p>The two engines <code>footnotes</code> and <code>references</code> process the content independently from the main document, keeping headers and variables isolated, and store the content into a global list that can be rendered with the relative commands <code>::footnotes:</code> and <code>::references:</code>. As happened for <code>source</code>, blocks of type <code>footnote</code> and <code>reference</code> are actually default blocks using the engine with the same name behind the scenes.</p><h2 id="custom-block-definitions-8b86">Custom block definitions</h2><p>As we saw in previous chapters and in the previous sections, blocks have many attributes that you can set on them. In the future chapters about templates we will also see how you can create and use custom attributes.</p><p>Setting the same parameters over and over can become tedious and error prone, so Mau provides a way to define blocks through the command <code>defblock</code>.</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::defblock:python, default, engine=source, language=python

[python]
----
a = 5
----
</div></div><p>which equivalent to</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[default, engine=source, language=python]
----
a = 5
----
</div></div><p>and is rendered as</p><div class="rendered"><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
</div></div></div></div><p>The syntax of a block definition is</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::defblock:ALIAS, BLOCKTYPE, ATTRIBUTE1, ATTRIBUTE2, ...
</div></div><p>where <code>ALIAS</code> is the name you will use in your Mau document with <code>[ALIAS]</code> and <code>BLOCKTYPE</code> is the actual block type that corresponds to that alias.</p><p>The attributes can have a default value or not. If they have no value they need to be specified when using the alias. For example the following definition</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>::defblock:mysource, aside, language, engine=source
</div></div><p>defines <code>mysource</code> as an alias for the block type <code>aside</code>, and requires the attribute <code>language</code> to be provided. The attribute <code>engine</code>, instead, has a default value and can be omitted. So, the following two blocks are both valid</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>[mysource, python]
----
a = 5
----

[mysource, python, engine=raw]
----
a = 5
----
</div></div><p>while omitting a value for <code>language</code> will result in a syntax error</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>// This block is not valid
[mysource]
----
a = 5
----
</div></div><p>Block definitions are static aliases, so it is perfectly fine to write a definition like</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::defblock:myblock, myblock, engine=raw, classes=&amp;quot;myclass1,myclass2&amp;quot;
</div></div><p>which allows to use the type <code>myblock</code> in conjunction with a default set of arguments.</p><h2 id="predefined-blocks-f46f">Predefined blocks</h2><p>As we saw in the previous sections, Mau defines provides some aliases out of the box. While these are created directly in the Python soruce code, they are equivalent to the following definitions</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::defblock:source, default, language=text, engine=source
::defblock:footnote, default, name, engine=footnote
::defblock:reference, default, type, name, engine=reference
::defblock:admonition, admonition, class, icon, label
</div></div><p>The built-in block type <code>quote</code> is not an alias and doesn&#x27;t contain additional attributes, so it works just like a <code>default</code> block.</p><div id="_footnotes"><div id=""><a href="#fr-5f4fc0c1-1">1</a> <p>For example:</p>
<ul><li><a href="HTML">https://en.wikipedia.org/wiki/HTML</a></li><li><a href="Markdown">https://en.wikipedia.org/wiki/Markdown</a></li><li><a href="TeX">https://en.wikipedia.org/wiki/TeX</a></li></ul></div></div><div class="default"><div class="content"><h1 id="basic-templates-2033">Basic templates</h1></div></div><blockquote><p>&#x27;That&#x27;s the idea,&#x27; replied Norton. &#x27;This may be an indexed catalogue for 3-D images—templates—solid blueprints, if you like to call them that.&#x27;</p><cite><p>Arthur C. Clarke, &quot;Rendezvous with Rama&quot; (1973)</p></cite></blockquote><p>So far, Mau provides features similar to Markdown, Asciidoc, and other markup languages. The real power of Mau, however relies in its use of templates to render the output of the syntax.</p><p>Everything you saw in the previous chapters is rendered as described thanks to the default Jinja templates provided by the visitors, but such templates can be easily customised to provide the output you prefer.</p><h2 id="a-simple-example-bf37">A simple example</h2><p>To start off on our journey with templates let&#x27;s have a look a the simplest ones. You know that the Mau provides styles like</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>Stars identify *strong* text.
</div></div><p>This piece of text is processed by Mau and the following Abstract Syntax Tree (AST) is created</p><div class="default"><div class="title">Abstract Syntax Tree</div><div class="content"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">content</span><span class="p">:</span>
<span class="w">        </span><span class="nt">data</span><span class="p">:</span>
<span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="err">&amp;</span><span class="c1">#x27;Stars identify &amp;#x27;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">              </span><span class="nt">content</span><span class="p">:</span>
<span class="w">                </span><span class="nt">data</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">content</span><span class="p">:</span>
<span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text</span>
<span class="w">                      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strong</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sentence</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">style</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">star</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text</span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="err">&amp;</span><span class="c1">#x27; text.&amp;#x27;</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sentence</span>
<span class="w">      </span><span class="nt">kwargs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">paragraph</span>
<span class="w">  </span><span class="nt">kwargs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">document</span>
</div></div><p>You can always visualise the AST using the output format <code>dump</code> on the command line</p><div class="default"><div class="content"><div class="highlight"><pre><span></span>mau -f dump -i input.mau -o -
</div></div><p>The AST is then processed by the chosen visitor, that will render each node. In this case the nodes are of type <code>text</code>, <code>sentence</code>, <code>style</code>, <code>paragraph</code>, and <code>document</code>.</p><p>The <code>style</code> node in the previous AST is</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">content</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">style</span>
<span class="w">  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">star</span>
</div></div><p>and the default HTML template for it is</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="n">star</span><span class="o">.</span><span class="n">html</span><span class="p">:</span> <span class="o">&amp;</span><span class="c1">#x27;&amp;lt;strong&amp;gt;{{ content }}&amp;lt;/strong&amp;gt;&amp;#x27;</span>
</div></div><p>The output of the whole text will be</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>Stars identify <span class="ni">&amp;lt;</span>strong<span class="ni">&amp;gt;</span>strong<span class="ni">&amp;lt;</span>/strong<span class="ni">&amp;gt;</span> text.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><p>where you can see the template <code>star.html</code> in action.</p><p>If we changed the template to</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="nt">star.html</span><span class="p">:</span><span class="w"> </span><span class="err">&amp;</span><span class="c1">#x27;&amp;lt;span class=&amp;quot;italic&amp;quot;&amp;gt;{{ content }}&amp;lt;/span&amp;gt;&amp;#x27;</span>
</div></div><p>the result would be</p><div class="default"><div class="title">HTML output</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span>Stars identify <span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>italic<span class="ni">&amp;quot;&amp;gt;</span>strong<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span> text.<span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><p>As you can see the names of the templates include an extension even though they are defined in a Python dictionary. This is done as templates can be provided as stand-alone files as well, and keeping a consistent naming simplifies their management.</p><h2 id="template-names-d8bb">Template names</h2><p>Each element of a Mau text is rendered using a specific template. The template can be unique for the element (e.g. <code>underscore.html</code> for the style <code>underscore</code>) or be selected among several options.</p><p>For example, blocks templates take into account the engine and the type. The block</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside]
----
This is a block of type `aside`
----
</div></div><p>will be rendered in HTML with the first of the following templates that is available:</p><ul><li><code>block-default-aside.html</code></li><li><code>block-default.html</code></li><li><code>block-aside.html</code></li><li><code>block.html</code></li></ul><p>You will find a detailed list of templates in the description of each node in the relative chapter. The list of templates for each node is decided by the visitor, so different visitors can provide different options.</p><h2 id="how-to-define-templates-9605">How to define templates</h2><p>Mau templates can be provided as files (one per template) or though a YAML configuration file.</p><h3 id="configuration-file-7c2e">Configuration file</h3><p>Mau templates can be defined in the YAML configuration file using the key <code>custom_templates</code>. For example</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">target_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">html</span>
<span class="nt">custom_templates</span><span class="p">:</span>
<span class="w">  </span><span class="nt">underscore.html</span><span class="p">:</span><span class="w"> </span><span class="err">&amp;</span><span class="c1">#x27;&amp;lt;span class=&amp;quot;bold&amp;quot;&amp;gt;{{ content }}&amp;lt;/span&amp;gt;&amp;#x27;</span>
<span class="w">  </span><span class="nt">star.html</span><span class="p">:</span><span class="w"> </span><span class="err">&amp;</span><span class="c1">#x27;&amp;lt;span class=&amp;quot;italic&amp;quot;&amp;gt;{{ content }}&amp;lt;/span&amp;gt;&amp;#x27;</span>
</div></div><p>This is a good solution for simple templates, but it might quickly become unmanageable if your templates include a lot of Jinja operators.</p><h3 id="individual-files-7dff">Individual files</h3><p>You can store templates in individual files inside a directory and pass the latter to Mau through the configuration file with the key <code>templates_directory</code>.</p><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="w"> </span><span class="nt">target_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">html</span>
<span class="w"> </span><span class="nt">templates_directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">templates</span>
</div></div><p>Each template is stored in a file with the appropriate name and contains only the code of the template, e.g.</p><div class="default"><div class="title">templates/underscore.html</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>bold<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</div></div><p>This is a good solution for complex templates, as it doesn&#x27;t require to quote the text. You can also benefit from syntax highlighting in your editor while writing the template.</p><h2 id="templates-syntax-02b2">Templates syntax</h2><p>Mau provides a base visitor class <code>BaseVisitor</code> that produces the YAML AST I showed previously. Mau also provides a <code>JinjaVisitor</code> class that uses the powerful template engine <a href="https://jinja.palletsprojects.com/en/3.0.x/">Jinja</a>.</p><p>The current visitor plugins are created as subclasses of <code>JinjaVisitor</code> but nothing stops you from creating a custom visitor that uses another engine.</p><p>The variables available to each Jinja template can be found in the description of each node in the next chapter.</p><div class="default"><div class="content"><h1 id="elements-and-nodes-39b8">Elements and nodes</h1></div></div><blockquote><p>Zane noted how artistically the elements of both carpet and machine had been integrated to make the device unidentifiable; this was a symbolic example, not a literal one. It had also been hastily done, for Luna had been home only a few hours.</p><cite><p>Piers Anthony, <em>On a Pale Horse</em> (1983)</p></cite></blockquote><p>This chapter contains the full documentation of all Mau elements. For each element you will find:</p><ul><li>A recap of the syntax.<ul><li>The scope of the node can be <code>inline</code> or <code>page</code>. <code>inline</code> nodes appear in paragraphs, mixed with normal text, while <code>page</code> nodes have to appear on separate lines of the document.</li><li>The type of the node is a string that uniquely identifies it in Mau.</li></ul></li><li>A short description.</li><li>The names of the templates that the <code>JinjaVisitor</code> class uses to render it in order of priority (without the format extension).</li><li>The documentation about the fields passed to the Jinja template with the type and a short description<ul><li><code>BOOLEAN</code>: a Python boolean that can be used directly in Jinja conditional statements.</li><li><code>INTEGER</code>: a Python integer.</li><li><code>LIST[TYPE]</code>: a list of values of the given <code>TYPE</code>.</li><li><code>STRING</code>: a Python string that contains pure text.</li><li><code>TARGET</code>: the target format. For example when rendering in HTML a field of type <code>TARGET</code> will insert some HTML.</li><li><code>VALUE1 | VALUE2 | VALUE3</code>: the value can only be one of the listed ones.</li><li><code>SPECIAL</code>: usually a more complex Python datatype like a dictionary or a list of tuples. See the description of the node for more details.</li><li>The fields <code>args</code>, <code>kwargs</code>, and <code>tags</code> have always the same type: a list of strings for <code>args</code> and <code>tags</code>, a dictionary for <code>kwargs</code>.</li><li>A template receives always the field <code>type</code> that contains the type of the node.</li></ul></li><li>The default HTML and LaTeX templates. Sometimes a format doesn&#x27;t specify a certain template, and this situation will be marked as <code>EMPTY</code>. Sometimes templates contain explicit newlines <code>\n</code>, which has been left to clarify that a new line is created of that the templates terminates with an empty line.</li><li>Some examples.</li></ul><p>To simplify the use of this chapter elements are listed in alphabetical order instead of being grouped per topic like in the rest of the book.</p><hr><h2 id="block-c429">Block</h2><p>This element represents a generic block.</p><p><strong>Syntax</strong></p><p>Type: <code>page</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[BLOCKTYPE]
----
CONTENT
----
</div></div><p><strong>Templates</strong></p><ul><li><code>block-{engine}-{blocktype}</code></li><li><code>block-{engine}</code></li><li><code>block-{blocktype}</code></li><li><code>block</code></li></ul><p><strong>Fields</strong></p><ul><li><code>blocktype (STRING)</code>: the type of this block</li><li><code>content (TARGET)</code>: the primary content (Mau text between fences)</li><li><code>secondary_content (TARGET)</code>: the secondary content (Mau text just below the closing fence</li><li><code>classes (LIST[STRING])</code>: a list of classes assigned to this block</li><li><code>title (STRING)</code>: a title specified before this block</li><li><code>engine (STRING)</code>: the engine that Mau used to process the block</li><li><code>preprocessor (STRING)</code>: the preprocessor (currently not in use)</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">blocktype</span> <span class="cp">}}{%</span> <span class="k">if</span> <span class="nv">classes</span> <span class="cp">%}</span> <span class="cp">{{</span> <span class="nv">classes</span> <span class="cp">}}{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="ni">&amp;quot;&amp;gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">title</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span><span class="k">\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[aside, classes=&amp;quot;custom,centred&amp;quot;]
----
This is the primary content of a block of type `aside` and with two classes `custom` and `centred`.
----
This is the secondary content
</div></div><hr><h2 id="callout-a491">Callout</h2><p>This element renders a callout attached to each line of code.</p><p>See: Source (block)</p><p><strong>Templates</strong></p><ul><li><code>callout</code></li></ul><p><strong>Fields</strong></p><ul><li><code>marker (STRING)</code>: the label of this callout</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>callout<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">marker</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><hr><h2 id="callout-entry-687f">Callout entry</h2><p>This element renders an element in the list of callouts. This list is usually presented at the end of a source block to show the text associated with each callout.</p><p>See: Source (block), Callout</p><p><strong>Templates</strong></p><ul><li><code>callouts_entry</code></li></ul><p><strong>Fields</strong></p><ul><li><code>marker (STRING)</code>: the label of this callout</li><li><code>value (STRING)</code>: the text associated with this callout</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>tr<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>td<span class="ni">&amp;gt;&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>callout<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">marker</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;&amp;lt;</span>/td<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>td<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/td<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/tr<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><hr><h2 id="caret-style-8dad">Caret (style)</h2><p>This style renders the text between two carets according to the template. The default template renders the text in superscript.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>style</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>^TEXT^
</div></div><p><strong>Templates</strong></p><ul><li><code>caret</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the style type (<code>caret</code>)</li><li><code>content (TARGET)</code>: the content of the node</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>sup<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/sup<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\textsuperscript</span><span class="nb">{</span> <span class="nb">{{</span>-content-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>^<span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>^
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This text is super^script^.
</div></div><div class="rendered"><div class="title">Rendered</div><div class="content"><p>This text is super<sup>script</sup>.</p></div></div><hr><h2 id="class-macro-7c12">Class (macro)</h2><p>This macro attaches one of more classes to a piece of text. At the moment, the default LaTeX output doesn&#x27;t use classes.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>class</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[class](text, &amp;quot;class1,class2,...&amp;quot;)
</div></div><p><strong>Templates</strong></p><ul><li><code>class</code></li></ul><p><strong>Fields</strong></p><ul><li><code>classes [LIST(STRING)]</code>: the list of classes</li><li><code>content (TARGET)</code>: the content of the node</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">classes</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="err">&amp;#</span><span class="nv">x27</span><span class="err">;</span> <span class="err">&amp;#</span><span class="nv">x27</span><span class="err">;</span><span class="o">)</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span>content<span class="nb">}}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This text is [class](&amp;quot;coloured&amp;quot;, &amp;quot;green&amp;quot;) thanks to a class.
</div></div><hr><h2 id="content-396c">Content</h2><p>This element is a very generic content loader, which has a specific implementation only for the type <code>image</code> (see &quot;Image (content)&quot;). It accepts arguments and consumes a title, so it can be used to achieve custom effects without involving blocks, whose syntax is more invasive.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>content</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>&amp;lt;&amp;lt; TYPE:ARGS,KWARGS,TAGS
</div></div><p><strong>Templates</strong></p><ul><li><code>content-{content_type}</code></li><li><code>content</code></li></ul><p><strong>Fields</strong></p><ul><li><code>content_type (STRING)</code>: the type of this content</li><li><code>title (TARGET)</code>: an optional title for the content</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"></div></div><hr><h2 id="document-8a50">Document</h2><p>This element is created automatically by Mau and wraps the whole document.</p><p><strong>Syntax</strong></p><p>Type: <code>page</code></p><p><strong>Templates</strong></p><ul><li><code>document</code></li></ul><p><strong>Fields</strong></p><ul><li><code>content (TARGET)</code>: the content of the document</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>html<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>head<span class="ni">&amp;gt;&amp;lt;</span>/head<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>body<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/body<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/html<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span>
</div></div><hr><h2 id="footnote-block-c0dc">Footnote (block)</h2><p>This block defines the content of a footnote and has to be paired with a macro <code>footnote</code> with the same name. Footnotes have a definition (the text of the footnote) and a reference (usually the number of the footnote in a paragraph). When footnotes are inserted in the document, the content of each footnote in the list is represented by this element. Since LaTeX manages footnotes automatically, the default template in that case is empty.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>footnotes_entry</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote, NAME]
----
CONTENT
----
</div></div><p><strong>Templates</strong></p><ul><li><code>footnotes_entry</code></li></ul><p><strong>Fields</strong></p><ul><li><code>content (TARGET)</code></li><li><code>number (STRING)</code>: The number of this footnote</li><li><code>reference_anchor (STRING)</code>: The anchor to the footnote reference</li><li><code>definition_anchor (STRING)</code>: The anchor to the footnote definition</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div id=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">definition_anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span>
  <span class="ni">&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#<span class="cp">{{</span> <span class="nv">reference_anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">number</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span> <span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>[^footnote_<span class="cp">{{</span> <span class="nv">reference_anchor</span> <span class="cp">}}</span>]: <span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote, mynote]
----
This is the body of the note called `mynote`. It will be referenced somewhere in the text through the macro `footnote`.
----
</div></div><hr><h2 id="footnote-macro-ab12">Footnote (macro)</h2><p>This element defines the reference to a footnote. It has to be paired with a block <code>footnote</code> that defines the content of the footnote.</p><p>Footnote macros and blocks are collected and processed as a whole, which is why this node can provide the content.</p><p>The anchors to the reference and the definition are unique strings in the document that can be used to set up internal links for formats like HTML that do not provide this service out of the box like LaTeX does.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>footnote</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[footnote](NAME)
</div></div><p><strong>Templates</strong></p><ul><li><code>footnote</code></li></ul><p><strong>Fields</strong></p><ul><li><code>content (TARGET)</code>: The content of the footnote defined by the companion block</li><li><code>number (STRING)</code>: The number of this footnote</li><li><code>reference_anchor (STRING)</code>: The anchor to this reference</li><li><code>definition_anchor (STRING)</code>: The anchor to the definition</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>sup<span class="ni">&amp;gt;</span>
[<span class="ni">&amp;lt;</span>a id=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">reference_anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;</span> href=<span class="ni">&amp;quot;</span>#<span class="cp">{{</span> <span class="nv">definition_anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">number</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>]
<span class="ni">&amp;lt;</span>/sup<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\footnote</span><span class="nb">{</span> <span class="nb">{{</span>-content-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>[^footnote_<span class="cp">{{</span> <span class="nv">reference_anchor</span> <span class="cp">}}</span>]
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This paragraph contains a footnote[footnote](mynote). It also contains other sentences.
</div></div><hr><h2 id="footnotes-command-cbfe">Footnotes (command)</h2><p>This command inserts the list of footnote definitions. Since LaTeX automatically puts footnotes at the bottom of each page, the default template in that case is empty.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>command_footnotes</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::footnotes:ARGS, KWARGS, TAGS
</div></div><p><strong>Templates</strong></p><ul><li><code>footnotes</code></li></ul><p><strong>Fields</strong></p><ul><li><code>entries (LIST[TARGET])</code>: this is the list of footnotes, each being the rendering of a footnote entry.</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div id=<span class="ni">&amp;quot;</span>_footnotes<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">entries</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">entries</span> <span class="cp">}}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::footnotes:
</div></div><hr><h2 id="header-77a7">Header</h2><p>This element renders a section header and stores it in the ToC.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>header</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= Header level 1
== Header level 2
=== Header level 3
[...]
</div></div><p><strong>Templates</strong></p><ul><li><code>header{level}</code></li><li><code>header</code></li></ul><p><strong>Fields</strong></p><p><code>value (STRING)</code>: the text of the header <code>level (INTEGER)</code>: the level of the header, 1 being the highest. <code>anchor (STRING)</code>: the anchor of the header if the template wants to set up cross-references between it and the ToC <code>args</code> <code>kwargs</code> <code>tags</code></p><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>h<span class="cp">{{</span> <span class="nv">level</span> <span class="cp">}}</span> id=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/h<span class="cp">{{</span> <span class="nv">level</span> <span class="cp">}}</span><span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\{</span><span class="nb">{</span>command<span class="nb">}}{</span> <span class="nb">{{</span>-value-<span class="nb">}}</span> <span class="nb">}</span>
<span class="k">\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> <span class="nb">&amp;</span>#x27;#<span class="nb">&amp;</span>#x27; * level <span class="nb">}}</span> <span class="nb">{{</span> value <span class="nb">}}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>= An important section

== A less important one
</div></div><hr><h2 id="horizontal-rule-2342">Horizontal rule</h2><p>This element inserts a horizontal rule. The rule can be optionally given arguments for further customisation.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>horizontal_rule</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>---
</div></div><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>---:ARGS,KWARGS,TAGS
</div></div><p><strong>Templates</strong></p><ul><li><code>horizontal_rule</code></li></ul><p><strong>Fields</strong></p><ul><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>hr<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\rule</span><span class="nb">{</span><span class="k">\textwidth</span><span class="nb">}{</span>0.5pt<span class="nb">}</span>
<span class="k">\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>* * *
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>---
</div></div><div class="rendered"><div class="title">Rendered source</div><div class="content"><hr></div></div><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[break]
---
</div></div><div class="default"><div class="title">Mau source (template)</div><div class="content"><div class="highlight"><pre><span></span>{% if &amp;#x27;break&amp;#x27; in args %}
\pagebreak
{% else %}
\vspace{24pt}\noindent\hfil\rule{0.5\textwidth}{.4pt}\vspace{24pt}\hfil
{% endif %}
</div></div><hr><h2 id="image-content-f87c">Image (content)</h2><p>This element inserts an image int he document. The image is inserted as a page element, for images included in paragraphs see &quot;Image (macro)&quot;.</p><p><strong>Syntax</strong></p><p>Type: <code>page</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>&amp;lt;&amp;lt; image:URI, ALT_TEXT, CLASSES, ARGS, KWARGS, TAGS
</pre></div>
</div></div><p><strong>Templates</strong></p><ul><li><code>content_image</code></li></ul><p><strong>Fields</strong></p><ul><li><code>uri (STRING)</code>: the URI of the image file</li><li><code>alt_text (STRING)</code>: alternative text to show if the image cannot be loaded</li><li><code>classes (LIST[STRING])</code>: list of classes to append to the target element</li><li><code>title (STRING)</code>: title (caption) of the image</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>imageblock<span class="ni">&amp;quot;&amp;gt;</span>
<span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
<span class="ni">&amp;lt;</span>img src=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">uri</span> <span class="cp">}}</span><span class="ni">&amp;quot;</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">alt_text</span> <span class="cp">%}</span> alt=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">alt_text</span> <span class="cp">}}</span><span class="ni">&amp;quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span> /<span class="ni">&amp;gt;</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">title</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>[h]
<span class="nb">{</span><span class="c">% if title %}\caption{ {{-title-}} }{% endif %}</span>
<span class="k">\centering</span>
<span class="k">\includegraphics</span><span class="na">[width=\textwidth]</span><span class="nb">{</span> <span class="nb">{{</span>-uri-<span class="nb">}}</span> <span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>figure<span class="nb">}</span>
<span class="k">\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{</span><span class="c">% if alt_text %}{alt: &amp;quot;{{ alt_text }}&amp;quot;}\n{% endif %}![{{ title }}]({{ uri }})</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>&amp;lt;&amp;lt; image:../images/cover.jpg, &amp;quot;The cover of the book&amp;quot;, &amp;quot;centered&amp;quot;, 
</div></div><hr><h2 id="image-macro-7792">Image (macro)</h2><p>Through this element, Mau inserts an image in a paragraph.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>image</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[image](URI, ALT_TEXT, WIDTH, HEIGHT)
</div></div><p><strong>Templates</strong></p><ul><li><code>inline_image</code></li></ul><p><strong>Fields</strong></p><ul><li><code>uri (STRING)</code>: the URI of the image in a format understood by the target processor.</li><li><code>alt_text (STRING)</code>: the alternative text used if the image cannot be loaded.</li><li><code>width (STRING)</code>: The width of the image</li><li><code>height (STRING)</code>: The height of the image</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>span class=<span class="ni">&amp;quot;</span>image<span class="ni">&amp;quot;&amp;gt;</span>
<span class="ni">&amp;lt;</span>img src=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">uri</span> <span class="cp">}}</span><span class="ni">&amp;quot;</span><span class="cp">{%</span><span class="k">if</span> <span class="nv">alt_text</span> <span class="cp">%}</span> alt=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">alt_text</span> <span class="cp">}}</span><span class="ni">&amp;quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\includegraphics</span><span class="nb">{</span> <span class="nb">{{</span>-uri-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>![<span class="nb">{{</span> alt<span class="nb">_</span>text <span class="nb">}}</span>](<span class="nb">{{</span> uri <span class="nb">}}</span>)
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This paragraph contains a little emoji [image](TODO).
</div></div><hr><h2 id="list-d297">List</h2><p>This element renders a list of items. The list can be ordered or unordered, and items can be nested. Each item in the template is either a single item (rendered with the relative template) or a sublist (rendered with the same template as the whole list).</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>list</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>* Unordered list item
** Unordered list item of level 2
*** Unordered list item of level 3
   *** Spaces are ignored before list item symbols
   *** So you are free to use them or not
[...]
# Ordered list item
## Ordered list item of level 2
### Ordered list item of level 3
[...]
</div></div><p><strong>Templates</strong></p><ul><li><code>list</code></li></ul><p><strong>Fields</strong></p><ul><li><code>ordered (BOOLEAN)</code>: whether the list is ordered or not</li><li><code>items (CONTENT)</code>: a list containing either items or sublists</li><li><code>main_node (BOOLEAN)</code>: whether this is the main list of a sublist</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">ordered</span> <span class="cp">%}</span>ol<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>ul<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">kwargs.start</span> <span class="cp">%}</span>start=<span class="cp">{{</span> <span class="nv">kwargs.start</span> <span class="cp">}}{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="ni">&amp;gt;</span>
<span class="cp">{{</span> <span class="nv">items</span> <span class="cp">}}</span>
<span class="ni">&amp;lt;</span>/<span class="cp">{%</span> <span class="k">if</span> <span class="nv">ordered</span> <span class="cp">%}</span>ol<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>ul<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{</span><span class="c">% if not main_node %}\n{% endif %}</span>
<span class="nb">{</span><span class="c">% if ordered %}\begin{enumerate}{% else %}\begin{itemize}{% endif %}</span>

<span class="nb">{{</span> items <span class="nb">}}</span>
<span class="nb">{</span><span class="c">% if ordered %}\end{enumerate}{% else %}\end{itemize}{% endif %}</span>
<span class="nb">{</span><span class="c">% if main_node %}\n\n{% endif %}&amp;quot;</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> items <span class="nb">}}{</span><span class="c">% if main_node %}\n{% endif %}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>* This is an unordered list
* That contains an ordered list
## The ordered list
## Is a sublist, though
* Lists can have
** Many levels
*** As you would expect
</div></div><div class="rendered"><div class="title">Rendered source</div><div class="content"><ul><li>This is an unordered list</li><li>That contains an ordered list<ol><li>The ordered list</li><li>Is a sublist, though</li></ol></li><li>Lists can have<ul><li>Many levels<ul><li>As you would expect</li></ul></li></ul></li></ul></div></div><hr><h2 id="list-item-be59">List item</h2><p>This element renders a single item in a list (see <code>List</code>).</p><p><strong>Templates</strong></p><ul><li><code>list_item</code></li></ul><p><strong>Fields</strong></p><ul><li><code>level (INTEGER)</code>: The level of nesting (1 is the first level).</li><li><code>content (target)</code>: the content of this item</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\item</span> <span class="nb">{{</span> content <span class="nb">}}</span>
<span class="k">\n</span><span class="nb">&amp;</span>quot;
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{</span><span class="c">% if not main_node %}</span>
<span class="nb">{</span><span class="c">% endif %}{{ &amp;#x27; &amp;#x27; * level }}* {{ content }}</span>
</div></div><hr><h2 id="link-macro-2431">Link (macro)</h2><p>This element represents a hypermedia link to a URL.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>link</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[link](TARGET, TEXT)
</div></div><p><strong>Templates</strong></p><ul><li><code>link</code></li></ul><p><strong>Fields</strong></p><ul><li><code>target (STRING)</code>: The target URL</li><li><code>text (STRING)</code>: The text of the link</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>a href=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">target</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">text</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\href</span><span class="nb">{</span> <span class="nb">{{</span>-target-<span class="nb">}}</span> <span class="nb">}{</span> <span class="nb">{{</span>-text-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">text</span><span class="o">!=</span><span class="nv">target</span> <span class="cp">%}</span>[<span class="cp">{{</span> <span class="nv">text</span> <span class="cp">}}</span>](<span class="cp">{{</span> <span class="nv">target</span> <span class="cp">}}</span>)<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span><span class="cp">{{</span> <span class="nv">target</span> <span class="cp">}}</span><span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>A lot of articles can be found on [link](&amp;quot;en.wikipedia.org/&amp;quot;, &amp;quot;Wikipedia&amp;quot;).
</div></div><div class="rendered"><div class="title">Rendered source</div><div class="content"><p>A lot of articles can be found on <a href="en.wikipedia.org/">Wikipedia</a>.</p></div></div><hr><h2 id="paragraph-0369">Paragraph</h2><p>This element represents a paragraph of text. Individual paragraphs must be separated by an empty line. Paragraphs can be given arguments to further customise them.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>paragraph</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>Any line of text that doesn&amp;#x27;t match another page element.
</div></div><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[ARGS, KWARGS, TAGS]
This is a paragraph with arguments.
</div></div><p><strong>Templates</strong></p><ul><li><code>paragraph</code></li></ul><p><strong>Fields</strong></p><ul><li><code>content (TARGET)</code>: the content of the paragraph</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>p<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/p<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span>
<span class="k">\n\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> content <span class="nb">}}</span><span class="k">\n</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This is a paragraph.

This is another paragraph.
</div></div><div class="rendered"><div class="title">Rendered source</div><div class="content"><p>This is a paragraph.</p>
<p>This is another paragraph.</p></div></div><hr><h2 id="source-block-a194">Source (block)</h2><p>This element is used to include source code. The primary content of the block is interpreted verbatim aside from &quot;callouts&quot; that are labels that can be attached to lines of the text and that can be referenced later in the document.</p><p>The block supports highlighting of the source code through Pygments and the standard components of blocks like titles, unnamed and named arguments, and tags.</p><p>There are three elements rendered by templates: the block itself, the callout label attached to a line, and each callout entry (similar to what happens with foornotes).</p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>def add(a, b): 1 &amp;lt;-- This is the callout label
    return a+b
    ^
    |
    This is the primary content

1: A function to add numbers &amp;lt;-- This is the callout entry
</div></div><p>Callouts are saved in two lists, <code>markers</code> and <code>callouts</code>. <code>markers</code> is a list of tuples <code>(linenum, text)</code>, where <code>linenum</code> is the number of a line, and <code>text</code> is the label assigned to that callout. <code>callouts</code> is a list of callout entries, rendered through the specific template.</p><p>Code is provided as a list of tuples <code>(line, callout)</code>. The variable <code>line</code> contains the line of code in the target format (possibly highlighted) and <code>callout</code> is either the rendered form of a callout (using the relative template) or <code>None</code>.</p><p>See: Callout entry, Callout</p><p><strong>Syntax</strong></p><p>Type: <code>page</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source, CALLOUTS, ARGS, KWARGS, TAGS]
----
CONTENT
----
</div></div><p><strong>Templates</strong></p><ul><li><code>source-{node.blocktype}-{node.language}</code></li><li><code>source-{node.language}</code></li><li><code>source-{node.blocktype}</code></li><li><code>source</code></li></ul><p><strong>Fields</strong></p><ul><li><code>language (STRING)</code>: the language of the code contained in this block</li><li><code>callouts (LIST[TARGET])</code>: a list of callout entries</li><li><code>markers (SPECIAL)</code>: list of markers (see description)</li><li><code>highlights (LIST[INTEGER])</code>: list of lines that have to be highlighted</li><li><code>delimiter (STRING)</code>: callouts delimiter</li><li><code>code (SPECIAL)</code>: code and callouts (see description)</li><li><code>title (STRING)</code>: title of this block</li><li><code>classes (LIST[STRING])</code>: a list of classes assigned to this block</li><li><code>preprocessor (STRING)</code>: the preprocessor (currently not in use)</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span><span class="cp">{{</span> <span class="nv">blocktype</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span>
   <span class="cp">{%</span> <span class="k">if</span> <span class="nv">title</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>title<span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
   <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>content<span class="ni">&amp;quot;&amp;gt;</span>
     <span class="cp">{%</span> <span class="k">for</span> <span class="nv">line</span><span class="o">,</span> <span class="nv">callout</span> <span class="k">in</span> <span class="nv">code</span> <span class="cp">%}{{</span> <span class="nv">line</span> <span class="cp">}}{%</span> <span class="k">if</span> <span class="nv">callout</span> <span class="cp">%}</span> <span class="cp">{{</span> <span class="nv">callout</span> <span class="cp">}}{%</span> <span class="k">endif</span> <span class="cp">%}</span>\n<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
   <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
   <span class="cp">{%</span> <span class="k">if</span> <span class="nv">callouts</span> <span class="cp">%}</span>
   <span class="ni">&amp;lt;</span>div class=<span class="ni">&amp;quot;</span>callouts<span class="ni">&amp;quot;&amp;gt;</span>
     <span class="ni">&amp;lt;</span>table<span class="ni">&amp;gt;</span>
       <span class="ni">&amp;lt;</span>tbody<span class="ni">&amp;gt;</span>
         <span class="cp">{%</span> <span class="k">for</span> <span class="nv">callout_entry</span> <span class="k">in</span> <span class="nv">callouts</span> <span class="cp">%}{{</span> <span class="nv">callout_entry</span> <span class="cp">}}{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
       <span class="ni">&amp;lt;</span>/tbody<span class="ni">&amp;gt;</span>
     <span class="ni">&amp;lt;</span>/table<span class="ni">&amp;gt;</span>
   <span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
   <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{{</span> code <span class="nb">}}</span><span class="k">\n</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span><span class="nb">{</span><span class="c">% if title %}{caption: &amp;quot;{{ title }}&amp;quot;}\n{% endif %}</span>
``` <span class="nb">{</span><span class="c">% if language %}{{ language }}{% endif %}</span>
<span class="nb">{</span><span class="c">% for line, _ in code %}{{ line }}\n{% endfor %}</span>
```<span class="k">\n</span>
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>[source, python]
----
def add(a, b):
    return a+b
----
</div></div><div class="rendered"><div class="title">Rendered source</div><div class="content"><div class="default"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</div></div></div></div><hr><h2 id="star-style-3556">Star (style)</h2><p>This style renders the text between two stars according to the template. The default template renders the text as bold.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>style</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>*TEXT*
</div></div><p><strong>Templates</strong></p><ul><li><code>star</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the style type (<code>star</code>)</li><li><code>content (TARGET)</code>: the content of the node</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>strong<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/strong<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\textbf</span><span class="nb">{</span> <span class="nb">{{</span>-content-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>**<span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>**
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This text is *bold*.
</div></div><div class="rendered"><div class="title">Rendered</div><div class="content"><p>This text is <strong>bold</strong>.</p></div></div><hr><h2 id="tilde-style-5c63">Tilde (style)</h2><p>This style renders the text between two tildes according to the template. The default template renders the text as subscript.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>style</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>~TEXT~
</div></div><p><strong>Templates</strong></p><ul><li><code>tilde</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the style type (<code>tilde</code>)</li><li><code>content (TARGET)</code>: the content of the node</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>sub<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/sub<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\textsubscript</span><span class="nb">{</span> <span class="nb">{{</span>-content-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>~<span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>~
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This text is sub~script~.
</div></div><div class="rendered"><div class="title">Rendered</div><div class="content"><p>This text is sub<sub>script</sub>.</p></div></div><hr><h2 id="toc-command-32aa">TOC (command)</h2><p>This command renders the list of all headers (Table of Contents). The argument <code>exclude_tag</code> can be used to remove headers with that tag.</p><p><strong>Syntax</strong></p><p>Scope: <code>page</code> Type: <code>command_toc</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>::toc:ARGS, KWARGS, TAGS
</div></div><p><strong>Templates</strong></p><ul><li><code>toc</code></li></ul><p><strong>Fields</strong></p><ul><li><code>entries (LIST[TARGET])</code>: this is the list of headers, each being the rendering of a TOC entry.</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entries</span><span class="cp">%}</span><span class="ni">&amp;lt;</span>ul<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">entries</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/ul<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span># Header in ToC

## Subheader in ToC

::toc:
</div></div><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span># Header in ToC

[#notoc]
## Subheader not in ToC

::toc:exclude_tag=notoc
</div></div><hr><h2 id="toc-entry-493b">ToC entry</h2><p>This element renders an element in the TOC.</p><p>See: TOC (command)</p><p><strong>Templates</strong></p><ul><li><code>toc_entry</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the header contained in this element</li><li><code>anchor (STRING)</code>: the anchor of the header</li><li><code>children (TARGET)</code>: the rendered list of children (rendered as the whole TOC)</li><li><code>args</code></li><li><code>kwargs</code></li><li><code>tags</code></li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>li<span class="ni">&amp;gt;</span>
  <span class="ni">&amp;lt;</span>a href=<span class="ni">&amp;quot;</span>#<span class="cp">{{</span> <span class="nv">anchor</span> <span class="cp">}}</span><span class="ni">&amp;quot;&amp;gt;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">children</span> <span class="cp">%}</span><span class="ni">&amp;lt;</span>ul<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">children</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/ul<span class="ni">&amp;gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="ni">&amp;lt;</span>/li<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>EMPTY
</div></div><hr><h2 id="underscore-style-6cea">Underscore (style)</h2><p>This style renders the text between two underscores according to the template. The default template renders the text as italic.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>style</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>_TEXT_
</div></div><p><strong>Templates</strong></p><ul><li><code>underscore</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the style type (<code>underscore</code>)</li><li><code>content (TARGET)</code>: the content of the node</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>em<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/em<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\textit</span><span class="nb">{</span> <span class="nb">{{</span>-content-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>*<span class="cp">{{</span> <span class="nv">content</span> <span class="cp">}}</span>*
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This text is _italic_.
</div></div><div class="rendered"><div class="title">Rendered</div><div class="content"><p>This text is <em>italic</em>.</p></div></div><hr><h2 id="verbatim-style-73e2">Verbatim (style)</h2><p>This style treats the text inside as verbatim, and is useful to render code inside paragraphs.</p><p><strong>Syntax</strong></p><p>Scope: <code>inline</code> Type: <code>verbatim</code></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>`TEXT`
</div></div><p><strong>Templates</strong></p><ul><li><code>verbatim</code></li></ul><p><strong>Fields</strong></p><ul><li><code>value (STRING)</code>: the verbatim text</li></ul><p><strong>Default templates</strong></p><div class="default"><div class="title">HTML</div><div class="content"><div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>code<span class="ni">&amp;gt;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="ni">&amp;lt;</span>/code<span class="ni">&amp;gt;</span>
</div></div><div class="default"><div class="title">LaTeX</div><div class="content"><div class="highlight"><pre><span></span><span class="k">\texttt</span><span class="nb">{</span> <span class="nb">{{</span>-value-<span class="nb">}}</span> <span class="nb">}</span>
</div></div><div class="default"><div class="title">Markua</div><div class="content"><div class="highlight"><pre><span></span>`<span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>`
</div></div><p><strong>Examples</strong></p><div class="default"><div class="title">Mau source</div><div class="content"><div class="highlight"><pre><span></span>This paragraphs contains `verbatim text`.
</div></div><div class="rendered"><div class="title">Rendered</div><div class="content"><p>This paragraphs contains <code>verbatim text</code>.</p></div></div><hr><h2 id="macro-b210">Macro</h2><p>TODO</p><p></p><p></p><p></p><p></p></body></html>
